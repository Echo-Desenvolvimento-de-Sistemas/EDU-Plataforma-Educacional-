import{c as ce,r as S,e as ne,j as s,L as c,b as de,a as me,H as xe}from"./app-BlZNpJaz.js";import{C as he,h as pe,P as fe,A as ue}from"./app-layout-vfDevXcM.js";import{B as U}from"./button-BFaAQ1F0.js";import{C as ge,a as be,b as je,c as ve}from"./card-DE5xUgg4.js";import{B as J}from"./badge-hQq2_SSh.js";import{I as ye}from"./input-ClKI_C3W.js";import{a as Ne,b as we,d as re,c as ke,S as Se}from"./select-wa9XAM0x.js";import{S as Z}from"./student-registration-card-Dbd65Egb.js";import{u as _e}from"./use-debounce-xlyvVL26.js";import{c as Ce,d as Ae,b as De,D as Te,e as Ee,f as Pe}from"./dialog-CCWmf-Wy.js";import{P as ee}from"./power-CbH9aRCg.js";import{E as se}from"./eye-B6GV-d21.js";import{S as te}from"./square-pen-DkkVFjNN.js";import{T as ae}from"./trash-2-C65_v2RJ.js";import{P as $e}from"./plus-CcX2yXqX.js";import{S as Fe}from"./search-BKAEKSF4.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-DWBLVih3.js";import"./createLucideIcon-G_Aima0p.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-ePvy9ijt.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";import"./check-C5YBzlMP.js";import"./label-D4nWcODD.js";import"./separator-RbYn2Kme.js";const Re=[{title:"Dashboard Admin",href:"/admin/dashboard"},{title:"Alunos",href:"/admin/students"}];function ws(n){const e=ce.c(66),{students:d,classRooms:O,filters:K}=n,[r,W]=S.useState(null),[l,X]=S.useState(!1),[_,ie]=S.useState(K.search||""),[o,le]=S.useState(K.class_room_id||"all"),C=_e(_,300);let A,D;e[0]!==o||e[1]!==C?(A=()=>{de.get("/admin/students",{search:C,class_room_id:o==="all"?void 0:o},{preserveState:!0,replace:!0})},D=[C,o],e[0]=o,e[1]=C,e[2]=A,e[3]=D):(A=e[2],D=e[3]),S.useEffect(A,D);let T;e[4]===Symbol.for("react.memo_cache_sentinel")?(T=a=>{X(!0),me.get(`/admin/students/${a}`).then(i=>{W(i.data)}).catch(Ve).finally(()=>{X(!1)})},e[4]=T):T=e[4];const Y=T,oe=Ie,{settings:t}=ne().props;let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(xe,{title:"Alunos"}),e[5]=E):E=e[5];let P;e[6]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"Alunos"}),e[6]=P):P=e[6];let $;e[7]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[P,s.jsxs(c,{href:"/admin/students/create",className:"flex items-center justify-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",children:[s.jsx($e,{className:"h-4 w-4"}),"Novo Aluno"]})]}),e[7]=$):$=e[7];let F;e[8]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(Fe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400"}),e[8]=F):F=e[8];let R;e[9]===Symbol.for("react.memo_cache_sentinel")?(R=a=>ie(a.target.value),e[9]=R):R=e[9];let m;e[10]!==_?(m=s.jsxs("div",{className:"relative flex-1",children:[F,s.jsx(ye,{type:"search",placeholder:"Buscar por nome ou CPF...",className:"pl-9",value:_,onChange:R})]}),e[10]=_,e[11]=m):m=e[11];let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(Ne,{children:s.jsx(we,{placeholder:"Filtrar por Turma"})}),e[12]=L):L=e[12];let I;e[13]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(re,{value:"all",children:"Todas as Turmas"}),e[13]=I):I=e[13];let x;e[14]!==O?(x=O.map(Le),e[14]=O,e[15]=x):x=e[15];let h;e[16]!==x?(h=s.jsxs(ke,{children:[I,x]}),e[16]=x,e[17]=h):h=e[17];let p;e[18]!==o||e[19]!==h?(p=s.jsx("div",{className:"w-full sm:w-[250px]",children:s.jsxs(Se,{value:o,onValueChange:le,children:[L,h]})}),e[18]=o,e[19]=h,e[20]=p):p=e[20];let f;e[21]!==p||e[22]!==m?(f=s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[m,p]}),e[21]=p,e[22]=m,e[23]=f):f=e[23];let u;if(e[24]!==l||e[25]!==d.data){let a;e[27]!==l?(a=i=>s.jsxs(ge,{children:[s.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(je,{className:"text-sm font-medium",children:i.name}),s.jsx(J,{variant:"outline",children:i.class_room?.name||"Sem Turma"})]}),s.jsxs(ve,{children:[s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:["Nascimento: ",new Date(i.birth_date).toLocaleDateString()]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["CPF: ",i.cpf||"-"]}),s.jsx("div",{className:"mb-4",children:s.jsx(J,{variant:i.status==="active"?"secondary":"destructive",children:i.status==="active"?"Ativo":"Cancelado"})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(c,{href:`/admin/students/${i.id}/toggle-status`,method:"patch",as:"button",preserveScroll:!0,className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 w-9 ${i.status==="active"?"text-green-600":"text-gray-400"}`,children:s.jsx(ee,{className:"h-4 w-4"})}),s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>Y(i.id),disabled:l,title:"Visualizar Ficha Cadastral",children:s.jsx(se,{className:"h-4 w-4"})}),s.jsx(c,{href:`/admin/students/${i.id}/edit`,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 w-9 text-indigo-600 hover:text-indigo-900",children:s.jsx(te,{className:"h-4 w-4"})}),s.jsx(c,{href:`/admin/students/${i.id}`,method:"delete",as:"button",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-red-100 hover:text-red-600 h-9 w-9",children:s.jsx(ae,{className:"h-4 w-4"})})]})]})]},i.id),e[27]=l,e[28]=a):a=e[28],u=d.data.map(a),e[24]=l,e[25]=d.data,e[26]=u}else u=e[26];let g;e[29]!==u?(g=s.jsx("div",{className:"grid gap-4 sm:hidden overflow-y-auto",children:u}),e[29]=u,e[30]=g):g=e[30];let V;e[31]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Nome"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Turma"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Nascimento"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"CPF"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Ações"})]})}),e[31]=V):V=e[31];let b;e[32]!==l||e[33]!==d.data?(b=d.data.length>0?d.data.map(a=>s.jsxs("tr",{children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:a.name}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.class_room?.name||"Sem Turma"}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(a.birth_date).toLocaleDateString()}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.cpf||"-"}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsx(J,{variant:a.status==="active"?"secondary":"destructive",children:a.status==="active"?"Ativo":"Cancelado"})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(c,{href:`/admin/students/${a.id}/toggle-status`,method:"patch",as:"button",preserveScroll:!0,title:a.status==="active"?"Cancelar Matrícula":"Ativar Matrícula",className:`transition-colors p-2 ${a.status==="active"?"text-green-600 hover:text-green-900":"text-gray-400 hover:text-gray-600"}`,children:s.jsx(ee,{className:"h-4 w-4"})}),s.jsx(c,{href:`/admin/students/${a.id}/attendance`,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 w-9 text-blue-600 hover:text-blue-900",title:"Visualizar Frequência (Caderno)",children:s.jsx(he,{className:"h-4 w-4"})}),s.jsx(U,{variant:"ghost",size:"icon",onClick:()=>Y(a.id),disabled:l,title:"Visualizar Ficha Cadastral",children:s.jsx(se,{className:"h-4 w-4"})}),s.jsx(c,{href:`/admin/students/${a.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 p-2",children:s.jsx(te,{className:"h-4 w-4"})}),s.jsx(c,{href:`/admin/students/${a.id}`,method:"delete",as:"button",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2",children:s.jsx(ae,{className:"h-4 w-4"})})]})})]},a.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Nenhum aluno encontrado."})}),e[32]=l,e[33]=d.data,e[34]=b):b=e[34];let j;e[35]!==b?(j=s.jsx("div",{className:"hidden sm:block flex-1 overflow-auto rounded-md border border-gray-200 dark:border-gray-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[V,s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900",children:b})]})}),e[35]=b,e[36]=j):j=e[36];const Q=!!r;let z;e[37]===Symbol.for("react.memo_cache_sentinel")?(z=a=>!a&&W(null),e[37]=z):z=e[37];let B,H;e[38]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(Ce,{children:"Ficha do Aluno"}),H=s.jsx(Ae,{className:"sr-only",children:"Detalhes do Aluno"}),e[38]=B,e[39]=H):(B=e[38],H=e[39]);let M;e[40]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsxs(De,{className:"print:hidden flex flex-row items-center justify-between",children:[B,H,s.jsxs(U,{variant:"outline",size:"sm",onClick:oe,className:"ml-auto",children:[s.jsx(fe,{className:"mr-2 h-4 w-4"}),"Imprimir"]})]}),e[40]=M):M=e[40];let v;e[41]!==r?(v=r&&s.jsx("div",{className:"space-y-6",children:s.jsx(Z,{student:r})}),e[41]=r,e[42]=v):v=e[42];let q;e[43]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(Te,{className:"sm:justify-between print:hidden"}),e[43]=q):q=e[43];let y;e[44]!==v?(y=s.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto print:hidden dark:bg-gray-900 dark:text-gray-100",children:[M,v,q]}),e[44]=v,e[45]=y):y=e[45];let N;e[46]!==Q||e[47]!==y?(N=s.jsx(Pe,{open:Q,onOpenChange:z,children:y}),e[46]=Q,e[47]=y,e[48]=N):N=e[48];let w;e[49]!==f||e[50]!==g||e[51]!==j||e[52]!==N?(w=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-hidden rounded-xl p-4 print:hidden",children:[$,f,g,j,N]}),e[49]=f,e[50]=g,e[51]=j,e[52]=N,e[53]=w):w=e[53];let k;e[54]!==t?.app_name||e[55]!==t?.school_address||e[56]!==t?.school_cep||e[57]!==t?.school_city||e[58]!==t?.school_name||e[59]!==t?.school_phone||e[60]!==t?.school_state||e[61]!==r?(k=r&&s.jsx("div",{className:"hidden print:block print:fixed print:inset-0 print:bg-white print:z-[9999] print:h-screen print:w-screen print:overflow-visible",children:s.jsxs("div",{className:"print:p-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b-2 border-black pb-4",children:[s.jsx("div",{className:"w-24 h-24 flex items-center justify-center shrink-0",children:s.jsx(pe,{className:"w-full h-full text-black"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold uppercase",children:t?.school_name||t?.app_name||"Centro Educacional Rosa de Sharon"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Educação Infantil e Ensino Fundamental"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t?.school_address||"Endereço não configurado",(t?.school_city||t?.school_state)&&` - ${t?.school_city||""}/${t?.school_state||""}`,t?.school_cep&&` - CEP: ${t?.school_cep}`,t?.school_phone&&` - Tel: ${t?.school_phone}`]})]}),s.jsx("div",{className:"w-24 shrink-0 text-right",children:s.jsxs("div",{className:"border border-black p-2 text-center",children:[s.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Matrícula Nº"}),s.jsx("p",{className:"text-lg font-bold",children:r.id.toString().padStart(4,"0")})]})})]}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("h2",{className:"text-xl font-bold uppercase bg-gray-200 py-1 print:bg-gray-200 print:text-black",children:"Ficha Cadastral do Aluno"})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 text-xs border border-gray-300 p-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Status da Matrícula:"}),s.jsx("span",{children:r.status==="active"?"ATIVA":"CANCELADA"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Turma Atual:"}),s.jsx("span",{children:r.class_room?.name||"Sem Turma"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Data Nascimento:"}),s.jsx("span",{children:new Date(r.birth_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"CPF:"}),s.jsx("span",{children:r.cpf||"-"})]})]}),s.jsx(Z,{student:r}),s.jsxs("div",{className:"mt-6 print:break-inside-avoid",children:[s.jsx("h3",{className:"text-sm font-bold uppercase border-b border-black mb-2",children:"Conferência de Documentos (Secretaria)"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Certidão de Nascimento"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Histórico Escolar / Transferência"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," 2 Fotos 3x4"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Cartão de Vacina Atualizado"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Comprovante de Residência"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," RG e CPF do Responsável"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Cartão do SUS"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Tipo Sanguíneo (Laudo)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Declaração de Quitação"]})]})]}),s.jsxs("div",{className:"mt-12 grid grid-cols-2 gap-16 print:break-inside-avoid",children:[s.jsx("div",{className:"text-center pt-8 border-t border-black",children:s.jsx("p",{className:"text-xs uppercase font-bold",children:"Assinatura do Responsável"})}),s.jsx("div",{className:"text-center pt-8 border-t border-black",children:s.jsx("p",{className:"text-xs uppercase font-bold",children:"Secretaria / Direção"})})]}),s.jsxs("div",{className:"flex justify-between mt-4 text-[10px] text-gray-400",children:[s.jsx("span",{children:"Sistema de Gestão Escolar - Rosa de Sharon"}),s.jsxs("span",{children:["Impresso em: ",new Date().toLocaleString("pt-BR")]})]})]})}),e[54]=t?.app_name,e[55]=t?.school_address,e[56]=t?.school_cep,e[57]=t?.school_city,e[58]=t?.school_name,e[59]=t?.school_phone,e[60]=t?.school_state,e[61]=r,e[62]=k):k=e[62];let G;return e[63]!==w||e[64]!==k?(G=s.jsxs(ue,{breadcrumbs:Re,children:[E,w,k]}),e[63]=w,e[64]=k,e[65]=G):G=e[65],G}function Le(n){return s.jsx(re,{value:String(n.id),children:n.name},n.id)}function Ie(){window.print()}function Ve(n){console.error("Error fetching student details",n)}export{ws as default};

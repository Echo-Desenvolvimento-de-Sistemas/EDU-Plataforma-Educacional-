import{c as v,j as s}from"./app-BlZNpJaz.js";import{a as T,b as w,c as N,e as y,T as A,d as P}from"./table-DRoYhqJ6.js";import{B as k}from"./button-BFaAQ1F0.js";import{B as g}from"./badge-hQq2_SSh.js";import{c as O,i as B,d as J}from"./app-layout-vfDevXcM.js";import{c as _}from"./utils-CTsRgsKi.js";import{a as z,b as E,P as $}from"./popover-BAsQVsaB.js";import{T as q}from"./textarea-BfFOsk1d.js";import{U as F}from"./user-Bs0CfZmM.js";import{C as H}from"./check-C5YBzlMP.js";import{c as M}from"./createLucideIcon-G_Aima0p.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],I=M("MessageSquare",R);function te(x){const e=v.c(12),{students:a,onStatusChange:c,onObservationChange:t,readOnly:m}=x,n=m===void 0?!1:m;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(T,{children:s.jsxs(w,{children:[s.jsx(N,{className:"w-[40%] sm:w-[300px]",children:"Aluno"}),s.jsx(N,{className:"text-center w-[40%] sm:w-auto",children:"Presença"}),s.jsx(N,{className:"w-[20%] text-right sm:text-left",children:"Obs"})]})}),e[0]=d):d=e[0];let i;if(e[1]!==t||e[2]!==c||e[3]!==n||e[4]!==a){let o;e[6]!==t||e[7]!==c||e[8]!==n?(o=r=>s.jsxs(w,{className:_("transition-colors",r.status==="absent"&&!r.is_justified&&"bg-red-50/50 dark:bg-red-950/20"),children:[s.jsx(y,{className:"py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(O,{className:"h-10 w-10 sm:h-9 sm:w-9 border-2 border-background shadow-sm",children:[s.jsx(B,{src:r.photo_url,alt:r.name}),s.jsx(J,{children:s.jsx(F,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-sm sm:text-base leading-tight",children:r.name}),r.is_justified&&s.jsx("div",{className:"flex gap-1 mt-1",children:s.jsx(g,{variant:"outline",className:"text-[10px] px-1 py-0 border-blue-500 text-blue-600 bg-blue-50",children:"Justificado"})}),r.status==="late"&&s.jsx("span",{className:"text-xs text-yellow-600 font-medium sm:hidden",children:"Atraso"})]})]})}),s.jsx(y,{className:"p-2 text-center",children:n?s.jsx(L,{status:r.status,isJustified:r.is_justified}):r.is_justified?s.jsx("div",{className:"flex justify-center",children:s.jsxs(g,{variant:"secondary",className:"bg-green-100 text-green-800 hover:bg-green-100 border-none px-3 py-1",children:[s.jsx(H,{className:"h-3 w-3 mr-1"}),"Presença Efetiva"]})}):s.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4",children:[s.jsx(C,{active:r.status==="present",variant:"success",onClick:()=>c(r.id,"present"),disabled:r.is_justified,children:"P"}),s.jsx(C,{active:r.status==="absent",variant:"danger",onClick:()=>c(r.id,"absent"),disabled:r.is_justified,children:"F"})]})}),s.jsx(y,{className:"text-right sm:text-left",children:s.jsx(U,{student:r,onChange:t,readOnly:n})})]},r.id),e[6]=t,e[7]=c,e[8]=n,e[9]=o):o=e[9],i=a.map(o),e[1]=t,e[2]=c,e[3]=n,e[4]=a,e[5]=i}else i=e[5];let l;return e[10]!==i?(l=s.jsx("div",{className:"rounded-md border bg-card",children:s.jsxs(A,{children:[d,s.jsx(P,{children:i})]})}),e[10]=i,e[11]=l):l=e[11],l}function C(x){const e=v.c(8),{active:a,variant:c,children:t,onClick:m,disabled:n}=x,d=c==="success"?a?"bg-green-500 text-white hover:bg-green-600 ring-2 ring-green-200":"bg-gray-100 text-gray-400 hover:bg-green-100 hover:text-green-600":a?"bg-red-500 text-white hover:bg-red-600 ring-2 ring-red-200":"bg-gray-100 text-gray-400 hover:bg-red-100 hover:text-red-600",i=n&&"opacity-50 cursor-not-allowed";let l;e[0]!==i||e[1]!==d?(l=_("h-10 w-10 sm:h-9 sm:w-9 rounded-full font-bold text-lg sm:text-sm transition-all shadow-sm active:scale-95",d,i),e[0]=i,e[1]=d,e[2]=l):l=e[2];let o;return e[3]!==t||e[4]!==n||e[5]!==m||e[6]!==l?(o=s.jsx("button",{type:"button",onClick:m,disabled:n,className:l,children:t}),e[3]=t,e[4]=n,e[5]=m,e[6]=l,e[7]=o):o=e[7],o}function U(x){const e=v.c(24),{student:a,onChange:c,readOnly:t}=x,m=a.observations&&a.observations.length>0,n=m?"outline":"ghost",d=m&&"border-amber-400 bg-amber-50 text-amber-700 hover:bg-amber-100";let i;e[0]!==d?(i=_("h-8 w-8 sm:h-9 sm:w-9",d),e[0]=d,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(I,{className:"h-4 w-4"}),e[2]=l):l=e[2];let o;e[3]!==n||e[4]!==i?(o=s.jsx(z,{asChild:!0,children:s.jsx(k,{variant:n,size:"icon",className:i,children:l})}),e[3]=n,e[4]=i,e[5]=o):o=e[5];let r;e[6]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("h4",{className:"font-medium leading-none",children:"Observações"}),e[6]=r):r=e[6];const p=t?"Notas sobre o aluno.":"Adicione notas sobre, atrasos ou comportamento.";let h;e[7]!==p?(h=s.jsx("p",{className:"text-sm text-muted-foreground",children:p}),e[7]=p,e[8]=h):h=e[8];let b;e[9]!==c||e[10]!==t||e[11]!==a.id||e[12]!==a.observations?(b=t?s.jsx("div",{className:"p-2 bg-muted rounded-md text-sm min-h-[60px]",children:a.observations||"Nenhuma observação."}):s.jsx(q,{value:a.observations||"",onChange:S=>c(a.id,S.target.value),placeholder:"Ex: Chegou atrasado, esqueceu material...",className:"h-24 resize-none"}),e[9]=c,e[10]=t,e[11]=a.id,e[12]=a.observations,e[13]=b):b=e[13];let f;e[14]!==a.is_justified||e[15]!==a.justification_details?(f=a.is_justified&&a.justification_details&&s.jsxs("div",{className:"mt-2 pt-2 border-t text-xs text-muted-foreground",children:[s.jsx("strong",{children:"Justificativa:"})," ",a.justification_details]}),e[14]=a.is_justified,e[15]=a.justification_details,e[16]=f):f=e[16];let u;e[17]!==f||e[18]!==h||e[19]!==b?(u=s.jsx(E,{className:"w-80",children:s.jsxs("div",{className:"space-y-2",children:[r,h,b,f]})}),e[17]=f,e[18]=h,e[19]=b,e[20]=u):u=e[20];let j;return e[21]!==u||e[22]!==o?(j=s.jsxs($,{children:[o,u]}),e[21]=u,e[22]=o,e[23]=j):j=e[23],j}function L(x){const e=v.c(4),{status:a,isJustified:c}=x;if(c){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(g,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Justificado"}),e[0]=t):t=e[0],t}switch(a){case"present":{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(g,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Presente"}),e[1]=t):t=e[1],t}case"absent":{let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(g,{variant:"destructive",children:"Faltou"}),e[2]=t):t=e[2],t}case"late":{let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(g,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Atraso"}),e[3]=t):t=e[3],t}}}export{te as A};

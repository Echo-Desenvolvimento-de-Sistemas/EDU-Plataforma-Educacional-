import{c as ts,r as Ke,u as Oe,j as s,b as rs,H as ls}from"./app-BlZNpJaz.js";import{B as b}from"./button-BFaAQ1F0.js";import{C as is,a as as,b as ns,c as os}from"./card-DE5xUgg4.js";import{b as Re,c as Le,a as cs,d as Me,D as ze,e as Xe,f as Je}from"./dialog-CCWmf-Wy.js";import{I as ms}from"./input-ClKI_C3W.js";import{L as De}from"./label-D4nWcODD.js";import{S as We,c as Ye,a as Ze,b as es,d as Ue}from"./select-wa9XAM0x.js";import{b as Ie,e as we,T as ds,a as fs,c as Ve,d as xs}from"./table-DRoYhqJ6.js";import{T as hs}from"./textarea-BfFOsk1d.js";import{A as us}from"./app-layout-vfDevXcM.js";import{t as ae}from"./index-Dzrob8QY.js";import{X as ps}from"./index-DWBLVih3.js";import{P as js}from"./plus-CcX2yXqX.js";import{K as bs}from"./kanban-C-iFe8aE.js";import{U as gs}from"./users-CYmdu12r.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-ePvy9ijt.js";import"./index-II6TlMg7.js";import"./index-20W_Bwtk.js";import"./Combination-CQbiwxas.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";import"./createLucideIcon-G_Aima0p.js";import"./check-C5YBzlMP.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";const vs=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Gerenciar Quadros",href:"/admin/kanban"}];function lt(g){const e=ts.c(150),{boards:a,potentialUsers:Ae}=g,[te,ke]=Ke.useState(!1),[r,qe]=Ke.useState(null);let ne;e[0]===Symbol.for("react.memo_cache_sentinel")?(ne={name:"",description:""},e[0]=ne):ne=e[0];const{data:i,setData:m,post:Ee,processing:re,reset:Qe,errors:v}=Oe(ne);let oe;e[1]===Symbol.for("react.memo_cache_sentinel")?(oe={user_id:"",permission:"view"},e[1]=oe):oe=e[1];const{data:n,setData:d,post:Fe,processing:Be,reset:He}=Oe(oe);let ce;e[2]!==Ee||e[3]!==Qe?(ce=l=>{l.preventDefault(),Ee("/admin/kanban",{onSuccess:()=>{ke(!1),Qe(),ae.success("Quadro criado com sucesso!")},onError:Ns})},e[2]=Ee,e[3]=Qe,e[4]=ce):ce=e[4];const le=ce;let me;e[5]===Symbol.for("react.memo_cache_sentinel")?(me=l=>{qe(l)},e[5]=me):me=e[5];const ss=me;let de;e[6]!==r||e[7]!==Fe||e[8]!==He?(de=l=>{l.preventDefault(),r&&Fe(`/admin/kanban/${r.id}/users`,{onSuccess:()=>{He(),ae.success("Usuário adicionado!")},onError:ys,preserveScroll:!0})},e[6]=r,e[7]=Fe,e[8]=He,e[9]=de):de=e[9];const ie=de;let fe;e[10]!==r?(fe=l=>{r&&confirm("Remover usuário do quadro?")&&rs.delete(`/admin/kanban/${r.id}/users/${l}`,{onSuccess:Ss,preserveScroll:!0})},e[10]=r,e[11]=fe):fe=e[11];const Pe=fe;let _,S,y,N,C,o,T,f,D,w,U,x,A,h,u,k,p,q,j,E;if(e[12]!==n.permission||e[13]!==n.user_id||e[14]!==a||e[15]!==i.description||e[16]!==i.name||e[17]!==v.name||e[18]!==te||e[19]!==r||e[20]!==Ae||e[21]!==re||e[22]!==Be||e[23]!==Pe||e[24]!==d||e[25]!==m||e[26]!==le||e[27]!==ie){o=a.find(t=>t.id===r?.id)||null,C=us,k=vs,e[48]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(ls,{title:"Gerenciar Quadros"}),e[48]=p):p=e[48],A="flex h-full flex-1 flex-col gap-4 rounded-xl p-4";let l;e[49]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Gerenciar Quadros"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Crie e gerencie os quadros de Kanban do sistema."})]}),e[49]=l):l=e[49];let ue;e[50]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(cs,{asChild:!0,children:s.jsxs(b,{children:[s.jsx(js,{className:"mr-2 h-4 w-4"}),"Novo Quadro"]})}),e[50]=ue):ue=e[50];let pe;e[51]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsxs(Re,{children:[s.jsx(Le,{children:"Criar Novo Quadro"}),s.jsx(Me,{children:"Defina o nome e a descrição do novo quadro."})]}),e[51]=pe):pe=e[51];let je;e[52]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(De,{htmlFor:"name",children:"Nome do Quadro"}),e[52]=je):je=e[52];let V;e[53]!==m?(V=t=>m("name",t.target.value),e[53]=m,e[54]=V):V=e[54];let K;e[55]!==i.name||e[56]!==V?(K=s.jsx(ms,{id:"name",value:i.name,onChange:V,placeholder:"Ex: Planejamento 2026",required:!0}),e[55]=i.name,e[56]=V,e[57]=K):K=e[57];let O;e[58]!==v.name?(O=v.name&&s.jsx("p",{className:"text-sm text-red-500",children:v.name}),e[58]=v.name,e[59]=O):O=e[59];let R;e[60]!==K||e[61]!==O?(R=s.jsxs("div",{className:"space-y-2",children:[je,K,O]}),e[60]=K,e[61]=O,e[62]=R):R=e[62];let be;e[63]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(De,{htmlFor:"description",children:"Descrição"}),e[63]=be):be=e[63];let L;e[64]!==m?(L=t=>m("description",t.target.value),e[64]=m,e[65]=L):L=e[65];let M;e[66]!==i.description||e[67]!==L?(M=s.jsxs("div",{className:"space-y-2",children:[be,s.jsx(hs,{id:"description",value:i.description,onChange:L,placeholder:"Para que serve este quadro..."})]}),e[66]=i.description,e[67]=L,e[68]=M):M=e[68];let ge;e[69]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(b,{type:"button",variant:"outline",onClick:()=>ke(!1),children:"Cancelar"}),e[69]=ge):ge=e[69];let z;e[70]!==re?(z=s.jsxs(ze,{children:[ge,s.jsx(b,{type:"submit",disabled:re,children:"Criar Quadro"})]}),e[70]=re,e[71]=z):z=e[71];let X;e[72]!==le||e[73]!==R||e[74]!==M||e[75]!==z?(X=s.jsxs(Xe,{children:[pe,s.jsxs("form",{onSubmit:le,className:"space-y-4",children:[R,M,z]})]}),e[72]=le,e[73]=R,e[74]=M,e[75]=z,e[76]=X):X=e[76],e[77]!==te||e[78]!==X?(h=s.jsxs("div",{className:"flex items-center justify-between",children:[l,s.jsxs(Je,{open:te,onOpenChange:ke,children:[ue,X]})]}),e[77]=te,e[78]=X,e[79]=h):h=e[79];let J;if(e[80]!==a){let t;e[82]===Symbol.for("react.memo_cache_sentinel")?(t=c=>s.jsxs(is,{children:[s.jsxs(as,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ns,{className:"text-sm font-medium",children:s.jsx("a",{href:`/kanban/${c.id}`,className:"hover:underline hover:text-primary",children:c.name})}),s.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(os,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[c.columns_count," Colunas"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c.description||"Sem descrição"}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx(gs,{className:"mr-1 h-3 w-3"}),c.users.length," membros"]}),s.jsx(b,{variant:"outline",size:"sm",onClick:()=>ss(c),children:"Gerenciar"})]})]})]},c.id),e[82]=t):t=e[82],J=a.map(t),e[80]=a,e[81]=J}else J=e[81];let W;e[83]!==a.length?(W=a.length===0&&s.jsx("div",{className:"col-span-full py-10 text-center text-muted-foreground",children:"Nenhum quadro encontrado. Crie o primeiro!"}),e[83]=a.length,e[84]=W):W=e[84],e[85]!==J||e[86]!==W?(u=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[J,W]}),e[85]=J,e[86]=W,e[87]=u):u=e[87],N=Je,U=!!r,e[88]===Symbol.for("react.memo_cache_sentinel")?(x=t=>!t&&qe(null),e[88]=x):x=e[88],y=Xe,D="max-w-2xl";let ve;e[89]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(Me,{children:"Adicione ou remova usuários deste quadro e defina suas permissões."}),e[89]=ve):ve=e[89],w=s.jsxs(Re,{children:[s.jsxs(Le,{children:["Gerenciar Membros - ",o?.name]}),ve]}),T="space-y-6";let _e;e[90]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(De,{htmlFor:"user",children:"Selecionar Usuário"}),e[90]=_e):_e=e[90];let Se;e[91]!==d?(Se=t=>d("user_id",t),e[91]=d,e[92]=Se):Se=e[92];let ye;e[93]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(Ze,{children:s.jsx(es,{placeholder:"Selecione..."})}),e[93]=ye):ye=e[93];const $e=s.jsxs(We,{value:n.user_id,onValueChange:Se,children:[ye,s.jsx(Ye,{children:Ae.filter(t=>!o?.users.find(c=>c.id===t.id)).map(_s)})]});let Y;e[94]!==$e?(Y=s.jsxs("div",{className:"grid flex-1 gap-2",children:[_e,$e]}),e[94]=$e,e[95]=Y):Y=e[95];let Ne;e[96]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(De,{htmlFor:"perm",children:"Permissão"}),e[96]=Ne):Ne=e[96];let Z;e[97]!==d?(Z=t=>d("permission",t),e[97]=d,e[98]=Z):Z=e[98];let Ce;e[99]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx(Ze,{children:s.jsx(es,{})}),e[99]=Ce):Ce=e[99];let Te;e[100]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsxs(Ye,{children:[s.jsx(Ue,{value:"view",children:"Só Ver"}),s.jsx(Ue,{value:"create_only",children:"Só Adicionar"}),s.jsx(Ue,{value:"edit",children:"Total"})]}),e[100]=Te):Te=e[100];let ee;e[101]!==n.permission||e[102]!==Z?(ee=s.jsxs("div",{className:"w-[150px] gap-2 grid",children:[Ne,s.jsxs(We,{value:n.permission,onValueChange:Z,children:[Ce,Te]})]}),e[101]=n.permission,e[102]=Z,e[103]=ee):ee=e[103];const Ge=Be||!n.user_id;let se;e[104]!==Ge?(se=s.jsx(b,{type:"submit",disabled:Ge,children:"Adicionar"}),e[104]=Ge,e[105]=se):se=e[105],e[106]!==ie||e[107]!==Y||e[108]!==ee||e[109]!==se?(f=s.jsxs("form",{onSubmit:ie,className:"flex gap-2 items-end rounded-lg border p-3 bg-muted/50",children:[Y,ee,se]}),e[106]=ie,e[107]=Y,e[108]=ee,e[109]=se,e[110]=f):f=e[110],E="rounded-md border",S=ds,e[111]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(fs,{children:s.jsxs(Ie,{children:[s.jsx(Ve,{children:"Nome"}),s.jsx(Ve,{children:"Permissão"}),s.jsx(Ve,{className:"w-[50px]"})]})}),e[111]=j):j=e[111],_=xs,q=o?.users.map(t=>s.jsxs(Ie,{children:[s.jsxs(we,{className:"font-medium",children:[t.name,s.jsx("span",{className:"block text-xs text-muted-foreground",children:t.email})]}),s.jsx(we,{children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium 
                                                        ${t.pivot?.permission==="edit"?"bg-green-100 text-green-700":t.pivot?.permission==="create_only"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:t.pivot?.permission==="edit"?"Controle Total":t.pivot?.permission==="create_only"?"Só Adicionar":"Só Ver"})}),s.jsx(we,{children:s.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>Pe(t.id),children:s.jsx(ps,{className:"h-4 w-4"})})})]},t.id)),e[12]=n.permission,e[13]=n.user_id,e[14]=a,e[15]=i.description,e[16]=i.name,e[17]=v.name,e[18]=te,e[19]=r,e[20]=Ae,e[21]=re,e[22]=Be,e[23]=Pe,e[24]=d,e[25]=m,e[26]=le,e[27]=ie,e[28]=_,e[29]=S,e[30]=y,e[31]=N,e[32]=C,e[33]=o,e[34]=T,e[35]=f,e[36]=D,e[37]=w,e[38]=U,e[39]=x,e[40]=A,e[41]=h,e[42]=u,e[43]=k,e[44]=p,e[45]=q,e[46]=j,e[47]=E}else _=e[28],S=e[29],y=e[30],N=e[31],C=e[32],o=e[33],T=e[34],f=e[35],D=e[36],w=e[37],U=e[38],x=e[39],A=e[40],h=e[41],u=e[42],k=e[43],p=e[44],q=e[45],j=e[46],E=e[47];let Q;e[112]!==o?.users.length?(Q=o?.users.length===0&&s.jsx(Ie,{children:s.jsx(we,{colSpan:3,className:"text-center text-muted-foreground h-24",children:"Nenhum membro adicionado a este quadro ainda."})}),e[112]=o?.users.length,e[113]=Q):Q=e[113];let F;e[114]!==_||e[115]!==Q||e[116]!==q?(F=s.jsxs(_,{children:[q,Q]}),e[114]=_,e[115]=Q,e[116]=q,e[117]=F):F=e[117];let B;e[118]!==S||e[119]!==F||e[120]!==j?(B=s.jsxs(S,{children:[j,F]}),e[118]=S,e[119]=F,e[120]=j,e[121]=B):B=e[121];let H;e[122]!==B||e[123]!==E?(H=s.jsx("div",{className:E,children:B}),e[122]=B,e[123]=E,e[124]=H):H=e[124];let P;e[125]!==T||e[126]!==f||e[127]!==H?(P=s.jsxs("div",{className:T,children:[f,H]}),e[125]=T,e[126]=f,e[127]=H,e[128]=P):P=e[128];let xe;e[129]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(ze,{children:s.jsx(b,{onClick:()=>qe(null),children:"Fechar"})}),e[129]=xe):xe=e[129];let $;e[130]!==y||e[131]!==D||e[132]!==w||e[133]!==P?($=s.jsxs(y,{className:D,children:[w,P,xe]}),e[130]=y,e[131]=D,e[132]=w,e[133]=P,e[134]=$):$=e[134];let G;e[135]!==N||e[136]!==U||e[137]!==x||e[138]!==$?(G=s.jsx(N,{open:U,onOpenChange:x,children:$}),e[135]=N,e[136]=U,e[137]=x,e[138]=$,e[139]=G):G=e[139];let I;e[140]!==A||e[141]!==h||e[142]!==u||e[143]!==G?(I=s.jsxs("div",{className:A,children:[h,u,G]}),e[140]=A,e[141]=h,e[142]=u,e[143]=G,e[144]=I):I=e[144];let he;return e[145]!==C||e[146]!==k||e[147]!==p||e[148]!==I?(he=s.jsxs(C,{breadcrumbs:k,children:[p,I]}),e[145]=C,e[146]=k,e[147]=p,e[148]=I,e[149]=he):he=e[149],he}function _s(g){return s.jsxs(Ue,{value:String(g.id),children:[g.name," (",g.role,")"]},g.id)}function Ss(){return ae.success("Usuário removido")}function ys(){return ae.error("Erro ao adicionar usuário.")}function Ns(){return ae.error("Erro ao criar quadro.")}export{lt as default};

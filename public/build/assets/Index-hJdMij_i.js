import{c as We,u as Xe,r as ve,e as Ye,j as s,b as Ze,H as es}from"./app-BlZNpJaz.js";import{S as Ee}from"./student-registration-card-Dbd65Egb.js";import{h as ss,k as Ae,P as ts,A as as}from"./app-layout-vfDevXcM.js";import{B as m}from"./button-BFaAQ1F0.js";import{I as Pe}from"./input-ClKI_C3W.js";import{L as o}from"./label-D4nWcODD.js";import{a as rs,b as Ie,c as x,e as h,T as ls,d as is}from"./table-DRoYhqJ6.js";import{a as Fe,b as Le,C as ze,c as $e}from"./card-DE5xUgg4.js";import{S as ye,a as ke,b as Se,c as we,d as me}from"./select-wa9XAM0x.js";import{B as Be}from"./badge-hQq2_SSh.js";import{c as He,d as Ve,b as Oe,D as Ge,e as Me,f as qe}from"./dialog-CCWmf-Wy.js";import{C as Ue}from"./copy-CZSnrNay.js";import{P as ns}from"./plus-CcX2yXqX.js";import{E as cs}from"./eye-B6GV-d21.js";import{C as ds}from"./check-C5YBzlMP.js";import{T as os}from"./trash-2-C65_v2RJ.js";/* empty css            */import"./separator-RbYn2Kme.js";import"./index-ePvy9ijt.js";import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-DWBLVih3.js";import"./createLucideIcon-G_Aima0p.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";function Xs(c){const e=We.c(107),{preRegistrations:xe,classRooms:he,students:pe}=c;let H;e[0]===Symbol.for("react.memo_cache_sentinel")?(H={student_name:"",target_class_id:"",student_id:"",type:"new"},e[0]=H):H=e[0];const{data:n,setData:d,post:ue,processing:je,errors:l,reset:fe}=Xe(H),[$,Ce]=ve.useState(null),[t,Te]=ve.useState(null),[B,V]=ve.useState(null);let O;e[1]!==ue||e[2]!==fe?(O=i=>{i.preventDefault(),ue(Ae.preRegistrations.store.url(),{onSuccess:()=>fe()})},e[1]=ue,e[2]=fe,e[3]=O):O=e[3];const ge=O;let G;e[4]===Symbol.for("react.memo_cache_sentinel")?(G=(i,r)=>{const Ke=`${window.location.origin}/pre-matricula/${i}`;navigator.clipboard.writeText(Ke),Ce(r),setTimeout(()=>Ce(null),2e3)},e[4]=G):G=e[4];const De=G;let M;e[5]!==B?(M=()=>{B&&Ze.delete(Ae.preRegistrations.destroy.url(B.id),{onSuccess:()=>V(null)})},e[5]=B,e[6]=M):M=e[6];const be=M,Re=ps,Qe=hs,{settings:a}=Ye().props;let q,U;e[7]===Symbol.for("react.memo_cache_sentinel")?(q=[{title:"Dashboard",href:"/secretaria/dashboard"},{title:"Pré-Matrículas",href:"/secretaria/pre-registrations"}],U=s.jsx(es,{title:"Pré-Matrículas"}),e[7]=q,e[8]=U):(q=e[7],U=e[8]);let Q;e[9]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(Fe,{children:s.jsx(Le,{children:"Gerar Novo Link"})}),e[9]=Q):Q=e[9];let J;e[10]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(o,{htmlFor:"type",children:"Tipo de Matrícula"}),e[10]=J):J=e[10];let p;e[11]!==d?(p=i=>d("type",i),e[11]=d,e[12]=p):p=e[12];let K;e[13]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(ke,{children:s.jsx(Se,{placeholder:"Selecione"})}),e[13]=K):K=e[13];let W;e[14]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs(we,{children:[s.jsx(me,{value:"new",children:"Aluno Novo"}),s.jsx(me,{value:"renewal",children:"Rematrícula (Aluno Existente)"})]}),e[14]=W):W=e[14];let u;e[15]!==n.type||e[16]!==p?(u=s.jsxs(ye,{value:n.type,onValueChange:p,children:[K,W]}),e[15]=n.type,e[16]=p,e[17]=u):u=e[17];let j;e[18]!==l.type?(j=l.type&&s.jsx("p",{className:"text-sm text-red-500",children:l.type}),e[18]=l.type,e[19]=j):j=e[19];let f;e[20]!==u||e[21]!==j?(f=s.jsxs("div",{className:"space-y-2",children:[J,u,j]}),e[20]=u,e[21]=j,e[22]=f):f=e[22];let g;e[23]!==n.student_id||e[24]!==n.student_name||e[25]!==n.type||e[26]!==l.student_id||e[27]!==l.student_name||e[28]!==d||e[29]!==pe?(g=n.type==="new"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"student_name",children:"Nome de Referência (Opcional)"}),s.jsx(Pe,{id:"student_name",value:n.student_name,onChange:i=>d("student_name",i.target.value),placeholder:"Ex: Família Silva"}),l.student_name&&s.jsx("p",{className:"text-sm text-red-500",children:l.student_name})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"student_id",children:"Selecione o Aluno"}),s.jsxs(ye,{value:n.student_id,onValueChange:i=>d("student_id",i),children:[s.jsx(ke,{children:s.jsx(Se,{placeholder:"Busque o aluno..."})}),s.jsx(we,{children:pe.map(xs)})]}),l.student_id&&s.jsx("p",{className:"text-sm text-red-500",children:l.student_id})]}),e[23]=n.student_id,e[24]=n.student_name,e[25]=n.type,e[26]=l.student_id,e[27]=l.student_name,e[28]=d,e[29]=pe,e[30]=g):g=e[30];let X;e[31]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(o,{htmlFor:"target_class_id",children:"Turma de Destino (Opcional)"}),e[31]=X):X=e[31];const Je=n.target_class_id;let b;e[32]!==d?(b=i=>d("target_class_id",i),e[32]=d,e[33]=b):b=e[33];let Y;e[34]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(ke,{children:s.jsx(Se,{placeholder:"Selecione a turma"})}),e[34]=Y):Y=e[34];let _;e[35]!==he?(_=he.map(ms),e[35]=he,e[36]=_):_=e[36];let N;e[37]!==_?(N=s.jsx(we,{children:_}),e[37]=_,e[38]=N):N=e[38];let v;e[39]!==n.target_class_id||e[40]!==b||e[41]!==N?(v=s.jsxs(ye,{value:Je,onValueChange:b,children:[Y,N]}),e[39]=n.target_class_id,e[40]=b,e[41]=N,e[42]=v):v=e[42];let y;e[43]!==l.target_class_id?(y=l.target_class_id&&s.jsx("p",{className:"text-sm text-red-500",children:l.target_class_id}),e[43]=l.target_class_id,e[44]=y):y=e[44];let k;e[45]!==v||e[46]!==y?(k=s.jsxs("div",{className:"space-y-2",children:[X,v,y]}),e[45]=v,e[46]=y,e[47]=k):k=e[47];let S;e[48]!==f||e[49]!==g||e[50]!==k?(S=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f,g,k]}),e[48]=f,e[49]=g,e[50]=k,e[51]=S):S=e[51];let Z;e[52]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(ns,{className:"mr-2 h-4 w-4"}),e[52]=Z):Z=e[52];let w;e[53]!==je?(w=s.jsxs(m,{type:"submit",disabled:je,children:[Z,"Gerar Link"]}),e[53]=je,e[54]=w):w=e[54];let C;e[55]!==ge||e[56]!==S||e[57]!==w?(C=s.jsxs(ze,{children:[Q,s.jsx($e,{children:s.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[S,w]})})]}),e[55]=ge,e[56]=S,e[57]=w,e[58]=C):C=e[58];let ee;e[59]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(Fe,{children:s.jsx(Le,{children:"Links Gerados"})}),e[59]=ee):ee=e[59];let se;e[60]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(rs,{children:s.jsxs(Ie,{children:[s.jsx(x,{children:"Referência / Aluno"}),s.jsx(x,{children:"Tipo"}),s.jsx(x,{children:"Turma Destino"}),s.jsx(x,{children:"Status"}),s.jsx(x,{children:"Criado Por"}),s.jsx(x,{children:"Data"}),s.jsx(x,{className:"text-right",children:"Ações"})]})}),e[60]=se):se=e[60];let T;if(e[61]!==$||e[62]!==xe){let i;e[64]!==$?(i=r=>s.jsxs(Ie,{children:[s.jsx(h,{className:"font-medium",children:r.type==="renewal"&&r.student?r.student.name:r.student_name||"Sem referência"}),s.jsx(h,{children:s.jsx(Be,{variant:r.type==="new"?"default":"secondary",children:r.type==="new"?"Novo":"Rematrícula"})}),s.jsx(h,{children:r.target_class?r.target_class.name:"-"}),s.jsx(h,{children:s.jsx(Be,{variant:r.status==="completed"?"outline":"destructive",className:r.status==="completed"?"text-green-600 border-green-600":"",children:r.status==="pending"?"Pendente":"Concluído"})}),s.jsx(h,{children:r.creator.name}),s.jsx(h,{children:Re(r.created_at)}),s.jsx(h,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>Te(r),children:[s.jsx(cs,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Visualizar"})]}),r.status==="pending"&&s.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>De(r.token,r.id),children:[$===r.id?s.jsx(ds,{className:"h-4 w-4 text-green-500"}):s.jsx(Ue,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Copiar Link"})]}),s.jsxs(m,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>V(r),children:[s.jsx(os,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Excluir"})]})]})})]},r.id),e[64]=$,e[65]=i):i=e[65],T=xe.map(i),e[61]=$,e[62]=xe,e[63]=T}else T=e[63];let D;e[66]!==T?(D=s.jsxs(ze,{children:[ee,s.jsx($e,{children:s.jsxs(ls,{children:[se,s.jsx(is,{children:T})]})})]}),e[66]=T,e[67]=D):D=e[67];let R;e[68]!==C||e[69]!==D?(R=s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[C,D]}),e[68]=C,e[69]=D,e[70]=R):R=e[70];const _e=!!t;let te;e[71]===Symbol.for("react.memo_cache_sentinel")?(te=()=>Te(null),e[71]=te):te=e[71];let ae,re;e[72]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(He,{children:"Ficha Cadastral do Aluno"}),re=s.jsx(Ve,{className:"sr-only",children:"Detalhamento completo dos dados da pré-matrícula"}),e[72]=ae,e[73]=re):(ae=e[72],re=e[73]);let le;e[74]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs(Oe,{className:"print:hidden flex flex-row items-center justify-between",children:[ae,re,s.jsxs(m,{variant:"outline",size:"sm",onClick:Qe,className:"ml-auto",children:[s.jsx(ts,{className:"mr-2 h-4 w-4"}),"Imprimir"]})]}),e[74]=le):le=e[74];let E;e[75]!==t?(E=t&&s.jsxs("div",{className:"space-y-6 print:hidden",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx(o,{className:"text-xs text-gray-500 uppercase",children:"Tipo"}),s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.type==="new"?"Novo Aluno":"Rematrícula"})]}),s.jsxs("div",{children:[s.jsx(o,{className:"text-xs text-gray-500 uppercase",children:"Status"}),s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.status==="completed"?"Concluído":"Pendente"})]}),s.jsxs("div",{children:[s.jsx(o,{className:"text-xs text-gray-500 uppercase",children:"Turma Destino"}),s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.target_class?t.target_class.name:"Não definida"})]}),s.jsxs("div",{children:[s.jsx(o,{className:"text-xs text-gray-500 uppercase",children:"Criado Por"}),s.jsx("div",{className:"border-t border-black pt-2",children:s.jsx("p",{className:"font-bold text-sm",children:"Secretaria / Coordenação"})})]})]}),t.student?s.jsx(Ee,{student:t.student}):s.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 dark:bg-gray-800 rounded-lg border border-dashed dark:border-gray-700",children:[s.jsx("p",{className:"text-lg font-medium",children:"Nenhum dado de aluno vinculado ainda."}),s.jsx("p",{className:"text-sm",children:"O aluno será criado/vinculado quando o formulário for preenchido pelo responsável."})]}),t.status==="pending"&&s.jsxs("div",{className:"pt-6 border-t bg-gray-50 dark:bg-gray-800 p-4 -mx-6 -mb-6 mt-6",children:[s.jsx(o,{className:"text-xs text-gray-500 dark:text-gray-400",children:"Link de Acesso para o Responsável"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Pe,{readOnly:!0,value:`${window.location.origin}/pre-matricula/${t.token}`,className:"bg-white dark:bg-gray-900"}),s.jsx(m,{size:"icon",variant:"outline",onClick:()=>De(t.token,t.id),children:s.jsx(Ue,{className:"h-4 w-4"})})]})]})]}),e[75]=t,e[76]=E):E=e[76];let ie;e[77]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(Ge,{className:"sm:justify-between print:hidden"}),e[77]=ie):ie=e[77];let A;e[78]!==E?(A=s.jsxs(Me,{className:"max-w-4xl max-h-[90vh] overflow-y-auto print:hidden dark:bg-gray-900 dark:text-gray-100",children:[le,E,ie]}),e[78]=E,e[79]=A):A=e[79];let P;e[80]!==_e||e[81]!==A?(P=s.jsx(qe,{open:_e,onOpenChange:te,children:A}),e[80]=_e,e[81]=A,e[82]=P):P=e[82];const Ne=!!B;let ne;e[83]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>V(null),e[83]=ne):ne=e[83];let ce;e[84]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsxs(Oe,{children:[s.jsx(He,{children:"Excluir Pré-Matrícula"}),s.jsx(Ve,{children:"Tem certeza que deseja excluir esta pré-matrícula? Esta ação não pode ser desfeita."})]}),e[84]=ce):ce=e[84];let de;e[85]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(m,{variant:"outline",onClick:()=>V(null),children:"Cancelar"}),e[85]=de):de=e[85];let I;e[86]!==be?(I=s.jsxs(Me,{children:[ce,s.jsxs(Ge,{children:[de,s.jsx(m,{variant:"destructive",onClick:be,children:"Excluir"})]})]}),e[86]=be,e[87]=I):I=e[87];let F;e[88]!==Ne||e[89]!==I?(F=s.jsx(qe,{open:Ne,onOpenChange:ne,children:I}),e[88]=Ne,e[89]=I,e[90]=F):F=e[90];let L;e[91]!==R||e[92]!==P||e[93]!==F?(L=s.jsxs("div",{className:"py-12 print:hidden",children:[R,P,F]}),e[91]=R,e[92]=P,e[93]=F,e[94]=L):L=e[94];let z;e[95]!==a?.app_name||e[96]!==a?.school_address||e[97]!==a?.school_cep||e[98]!==a?.school_city||e[99]!==a?.school_name||e[100]!==a?.school_phone||e[101]!==a?.school_state||e[102]!==t?(z=t&&s.jsx("div",{className:"hidden print:block print:fixed print:inset-0 print:bg-white print:z-[9999] print:h-screen print:w-screen print:overflow-visible",children:s.jsxs("div",{className:"print:p-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b-2 border-black pb-4",children:[s.jsx("div",{className:"w-24 h-24 flex items-center justify-center shrink-0",children:s.jsx(ss,{className:"w-full h-full text-black"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold uppercase",children:a?.school_name||a?.app_name||"Centro Educacional Rosa de Sharon"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Educação Infantil e Ensino Fundamental"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a?.school_address||"Endereço não configurado",(a?.school_city||a?.school_state)&&` - ${a?.school_city||""}/${a?.school_state||""}`,a?.school_cep&&` - CEP: ${a?.school_cep}`,a?.school_phone&&` - Tel: ${a?.school_phone}`]})]}),s.jsx("div",{className:"w-24 shrink-0 text-right",children:s.jsxs("div",{className:"border border-black p-2 text-center",children:[s.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Ficha Nº"}),s.jsx("p",{className:"text-lg font-bold",children:t.id.toString().padStart(4,"0")})]})})]}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("h2",{className:"text-xl font-bold uppercase bg-gray-200 py-1 print:bg-gray-200 print:text-black",children:"Ficha Cadastral do Aluno"})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 text-xs border border-gray-300 p-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Tipo de Matrícula:"}),s.jsx("span",{children:t.type==="new"?"Novo Aluno":"Rematrícula"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Turma Indicada:"}),s.jsx("span",{children:t.target_class?t.target_class.name:"A definir"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Status:"}),s.jsx("span",{children:t.status==="completed"?"Concluído":"Pendente"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold block uppercase",children:"Data Registro:"}),s.jsx("span",{children:Re(t.created_at)})]})]}),t.student?s.jsx(Ee,{student:t.student}):s.jsx("div",{className:"text-center py-12 text-gray-500 border border-dashed",children:s.jsx("p",{children:"Nenhum dado de aluno vinculado."})}),s.jsxs("div",{className:"mt-6 print:break-inside-avoid",children:[s.jsx("h3",{className:"text-sm font-bold uppercase border-b border-black mb-2",children:"Conferência de Documentos (Uso da Secretaria)"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Certidão de Nascimento"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Histórico Escolar / Transferência"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," 2 Fotos 3x4"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Cartão de Vacina Atualizado"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Comprovante de Residência"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," RG e CPF do Responsável"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Cartão do SUS"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Tipo Sanguíneo (Laudo)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 border border-black"})," Declaração de Quitação"]})]})]}),s.jsxs("div",{className:"mt-12 grid grid-cols-2 gap-16 print:break-inside-avoid",children:[s.jsx("div",{className:"text-center pt-8 border-t border-black",children:s.jsx("p",{className:"text-xs uppercase font-bold",children:"Assinatura do Responsável"})}),s.jsx("div",{className:"text-center pt-8 border-t border-black",children:s.jsx("p",{className:"text-xs uppercase font-bold",children:"Secretaria / Direção"})})]}),s.jsxs("div",{className:"flex justify-between mt-4 text-[10px] text-gray-400",children:[s.jsx("span",{children:"Sistema de Gestão Escolar - Rosa de Sharon"}),s.jsxs("span",{children:["Impresso em: ",new Date().toLocaleString("pt-BR")]})]})]})}),e[95]=a?.app_name,e[96]=a?.school_address,e[97]=a?.school_cep,e[98]=a?.school_city,e[99]=a?.school_name,e[100]=a?.school_phone,e[101]=a?.school_state,e[102]=t,e[103]=z):z=e[103];let oe;return e[104]!==L||e[105]!==z?(oe=s.jsxs(as,{breadcrumbs:q,children:[U,L,z]}),e[104]=L,e[105]=z,e[106]=oe):oe=e[106],oe}function ms(c){return s.jsx(me,{value:String(c.id),children:c.name},c.id)}function xs(c){return s.jsxs(me,{value:String(c.id),children:[c.name," (",c.cpf,")"]},c.id)}function hs(){window.print()}function ps(c){return c?new Date(c).toLocaleDateString():"-"}export{Xs as default};

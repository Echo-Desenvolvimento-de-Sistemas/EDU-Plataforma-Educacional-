import{c as Ce,j as t,u as ke,r as Ne,b as we,H as Ae,L as Se}from"./app-BlZNpJaz.js";import{B as ne}from"./button-BFaAQ1F0.js";import{I as Fe}from"./input-ClKI_C3W.js";import{L as ve}from"./label-D4nWcODD.js";import{a as Le,b as $e,c as De,S as qe,d as Ee}from"./select-wa9XAM0x.js";import{c as Ie,i as Te,d as ze,A as Oe}from"./app-layout-vfDevXcM.js";import{A as Pe}from"./AttendanceTable-DAMTWNjQ.js";import{c as Re}from"./utils-CTsRgsKi.js";import{C as Ve}from"./circle-alert-CAGRjitk.js";import{C as Be}from"./check-C5YBzlMP.js";import{X as He}from"./index-DWBLVih3.js";import{T as Je}from"./textarea-BfFOsk1d.js";import{t as ye}from"./index-Dzrob8QY.js";import{A as Me}from"./arrow-left-C_Tsc45O.js";import{L as Ue}from"./loader-circle-DIuL06p2.js";import{S as We}from"./save-zMiZTWPN.js";/* empty css            */import"./index-BSNktiLJ.js";import"./index-ePvy9ijt.js";import"./index-II6TlMg7.js";import"./index-20W_Bwtk.js";import"./Combination-CQbiwxas.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";import"./createLucideIcon-G_Aima0p.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./table-DRoYhqJ6.js";import"./badge-hQq2_SSh.js";import"./popover-BAsQVsaB.js";import"./user-Bs0CfZmM.js";function Xe(a){const e=Ce.c(10),{students:l,onStatusChange:x,readOnly:j}=a,b=j===void 0?!1:j,c=Ke,ce=Ge;let u;e[0]!==x||e[1]!==b?(u=n=>{if(b)return;let s="present";n.status==="present"?s="absent":n.status==="absent"?s="justified":n.status==="justified"&&(s="present"),x(n.id,s)},e[0]=x,e[1]=b,e[2]=u):u=e[2];const f=u;let d;if(e[3]!==f||e[4]!==l){let n;e[6]!==f?(n=s=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border rounded-xl shadow-sm transition-all active:scale-[0.99]",onClick:()=>f(s),children:[t.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[t.jsxs(Ie,{className:"h-10 w-10 border-2 border-background shadow-sm",children:[t.jsx(Te,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${s.name}`}),t.jsx(ze,{children:c(s.name)})]}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-semibold truncate text-sm sm:text-base",children:s.name}),s.name.startsWith("A")&&t.jsxs("span",{className:"text-[10px] text-red-500 font-medium flex items-center",children:[t.jsx(Ve,{className:"w-3 h-3 mr-1"}),"Atenção: Faltas"]})]})]}),t.jsxs(ne,{variant:"ghost",size:"lg",className:Re("h-12 w-16 rounded-lg border-2 transition-all duration-200 relative",ce(s.status)),onClick:h=>{h.stopPropagation(),f(s)},children:[s.status==="present"&&t.jsx("span",{className:"font-bold text-lg",children:"P"}),s.status==="absent"&&t.jsx("span",{className:"font-bold text-lg",children:"F"}),s.status==="justified"&&t.jsx("span",{className:"font-bold text-lg",children:"J"}),s.status==="present"&&t.jsx(Be,{className:"absolute right-1 top-1 w-3 h-3 opacity-50"}),s.status==="absent"&&t.jsx(He,{className:"absolute right-1 top-1 w-3 h-3 opacity-50"})]})]},s.id),e[6]=f,e[7]=n):n=e[7],d=l.map(n),e[3]=f,e[4]=l,e[5]=d}else d=e[5];let p;return e[8]!==d?(p=t.jsx("div",{className:"space-y-3 pb-24",children:d}),e[8]=d,e[9]=p):p=e[9],p}function Ge(a){switch(a){case"present":return"bg-green-100 text-green-700 border-green-200 hover:bg-green-200 hover:border-green-300";case"absent":return"bg-red-100 text-red-700 border-red-200 hover:bg-red-200 hover:border-red-300";case"justified":return"bg-yellow-100 text-yellow-700 border-yellow-200 hover:bg-yellow-200 hover:border-yellow-300";case"late":return"bg-orange-100 text-orange-700 border-orange-200 hover:bg-orange-200 hover:border-orange-300";default:return"bg-secondary text-secondary-foreground"}}function Ke(a){return a.split(" ").map(Qe).slice(0,2).join("").toUpperCase()}function Qe(a){return a[0]}function Rt(a){const e=Ce.c(109),{classRoom:l,subjects:x,selectedSubjectId:j,selectedDate:b,students:c,existingContent:ce}=a;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={title:"Painel",href:"/professor/dashboard"},e[0]=u):u=e[0];const f=`/professor/classes/${l.id}`;let d;e[1]!==l.name||e[2]!==f?(d={title:l.name,href:f},e[1]=l.name,e[2]=f,e[3]=d):d=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={title:"Lançar Frequência",href:""},e[4]=p):p=e[4];let n;e[5]!==d?(n=[u,d,p],e[5]=d,e[6]=n):n=e[6];const s=n;let h;e[7]!==j?(h=j.toString(),e[7]=j,e[8]=h):h=e[8];const de=ce||"";let v;e[9]!==c?(v=c.map(st),e[9]=c,e[10]=v):v=e[10];let X;e[11]!==b||e[12]!==h||e[13]!==de||e[14]!==v?(X={subject_id:h,date:b,classes_count:2,content:de,students:v},e[11]=b,e[12]=h,e[13]=de,e[14]=v,e[15]=X):X=e[15];const{data:r,setData:i,post:me,processing:N}=ke(X),[w,fe]=Ne.useState(c);let G;e[16]!==i||e[17]!==c?(G=()=>{fe(c),i("students",c.map(tt))},e[16]=i,e[17]=c,e[18]=G):G=e[18];let K;e[19]!==c?(K=[c],e[19]=c,e[20]=K):K=e[20],Ne.useEffect(G,K);let Q;e[21]!==r.subject_id||e[22]!==i?(Q=o=>{i("date",o),we.visit(window.location.pathname,{data:{subject_id:r.subject_id,date:o},only:["students","selectedDate","existingContent"],preserveState:!0,preserveScroll:!0,replace:!0})},e[21]=r.subject_id,e[22]=i,e[23]=Q):Q=e[23];const ue=Q;let Y;e[24]!==r.date||e[25]!==i?(Y=o=>{i("subject_id",o),we.visit(window.location.pathname,{data:{subject_id:o,date:r.date},replace:!0,preserveState:!0,preserveScroll:!0})},e[24]=r.date,e[25]=i,e[26]=Y):Y=e[26];const pe=Y;let Z;e[27]!==r.students||e[28]!==i?(Z=(o,W)=>{fe(m=>m.map(g=>g.id===o?{...g,status:W}:g)),i("students",r.students.map(m=>m.id===o?{...m,status:W}:m))},e[27]=r.students,e[28]=i,e[29]=Z):Z=e[29];const S=Z;let ee;e[30]!==r.students||e[31]!==i?(ee=(o,W)=>{fe(m=>m.map(g=>g.id===o?{...g,observations:W}:g)),i("students",r.students.map(m=>m.id===o?{...m,observations:W}:m))},e[30]=r.students,e[31]=i,e[32]=ee):ee=e[32];const he=ee;let te;e[33]!==l.id||e[34]!==me?(te=o=>{o.preventDefault(),me(`/professor/classes/${l.id}/attendance`,{onSuccess:et,onError:Ze})},e[33]=l.id,e[34]=me,e[35]=te):te=e[35];const xe=te,be=`Frequência - ${l.name}`;let C;e[36]!==be?(C=t.jsx(Ae,{title:be}),e[36]=be,e[37]=C):C=e[37];const ge=`/professor/classes/${l.id}`;let se;e[38]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Me,{className:"h-4 w-4"}),e[38]=se):se=e[38];let y;e[39]!==ge?(y=t.jsx(ne,{variant:"ghost",size:"icon",asChild:!0,className:"shrink-0",children:t.jsx(Se,{href:ge,children:se})}),e[39]=ge,e[40]=y):y=e[40];let _;e[41]!==l.name?(_=t.jsx("h1",{className:"text-xl font-bold tracking-tight",children:l.name}),e[41]=l.name,e[42]=_):_=e[42];let k;e[43]!==l.grade.name?(k=t.jsx("p",{className:"text-sm text-muted-foreground",children:l.grade.name}),e[43]=l.grade.name,e[44]=k):k=e[44];let A;e[45]!==_||e[46]!==k?(A=t.jsxs("div",{children:[_,k]}),e[45]=_,e[46]=k,e[47]=A):A=e[47];let F;e[48]!==y||e[49]!==A?(F=t.jsxs("div",{className:"flex items-center gap-4",children:[y,A]}),e[48]=y,e[49]=A,e[50]=F):F=e[50];let ae;e[51]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(ve,{htmlFor:"date",className:"text-xs font-semibold",children:"Data"}),e[51]=ae):ae=e[51];let L;e[52]!==ue?(L=o=>ue(o.target.value),e[52]=ue,e[53]=L):L=e[53];let $;e[54]!==r.date||e[55]!==L?($=t.jsxs("div",{className:"space-y-1",children:[ae,t.jsx(Fe,{id:"date",type:"date",value:r.date,onChange:L,className:"bg-background h-9"})]}),e[54]=r.date,e[55]=L,e[56]=$):$=e[56];let re;e[57]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(ve,{htmlFor:"subject",className:"text-xs font-semibold",children:"Disciplina"}),e[57]=re):re=e[57];const _e=r.subject_id;let le;e[58]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Le,{id:"subject",className:"bg-background h-9",children:t.jsx($e,{})}),e[58]=le):le=e[58];let D;e[59]!==x?(D=x.map(Ye),e[59]=x,e[60]=D):D=e[60];let q;e[61]!==D?(q=t.jsx(De,{children:D}),e[61]=D,e[62]=q):q=e[62];let E;e[63]!==r.subject_id||e[64]!==pe||e[65]!==q?(E=t.jsxs("div",{className:"space-y-1",children:[re,t.jsxs(qe,{value:_e,onValueChange:pe,children:[le,q]})]}),e[63]=r.subject_id,e[64]=pe,e[65]=q,e[66]=E):E=e[66];let I;e[67]!==$||e[68]!==E?(I=t.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full md:w-auto",children:[$,E]}),e[67]=$,e[68]=E,e[69]=I):I=e[69];let T;e[70]!==F||e[71]!==I?(T=t.jsx("div",{className:"p-4 space-y-4 border-b bg-card",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[F,I]})}),e[70]=F,e[71]=I,e[72]=T):T=e[72];let z;e[73]!==w||e[74]!==he||e[75]!==S?(z=t.jsx("div",{className:"hidden md:block bg-card rounded-xl border shadow-sm p-4",children:t.jsx(Pe,{students:w,onStatusChange:S,onObservationChange:he})}),e[73]=w,e[74]=he,e[75]=S,e[76]=z):z=e[76];let O;e[77]!==w||e[78]!==S?(O=t.jsx("div",{className:"block md:hidden",children:t.jsx(Xe,{students:w,onStatusChange:S})}),e[77]=w,e[78]=S,e[79]=O):O=e[79];let ie;e[80]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(ve,{htmlFor:"content",children:"Conteúdo Ministrado"}),e[80]=ie):ie=e[80];let P;e[81]!==i?(P=o=>i("content",o.target.value),e[81]=i,e[82]=P):P=e[82];let R;e[83]!==r.content||e[84]!==P?(R=t.jsx("div",{className:"mt-6 md:mt-8 bg-card rounded-xl border shadow-sm p-4",children:t.jsxs("div",{className:"space-y-2",children:[ie,t.jsx(Je,{id:"content",placeholder:"Descreva o que foi ensinado hoje...",value:r.content,onChange:P,rows:3})]})}),e[83]=r.content,e[84]=P,e[85]=R):R=e[85];let V;e[86]!==z||e[87]!==O||e[88]!==R?(V=t.jsxs("div",{className:"flex-1 overflow-auto p-4 md:p-6",children:[z,O,R]}),e[86]=z,e[87]=O,e[88]=R,e[89]=V):V=e[89];const je=`/professor/classes/${l.id}`;let B;e[90]!==je?(B=t.jsx(ne,{variant:"outline",className:"hidden md:flex",asChild:!0,children:t.jsx(Se,{href:je,children:"Cancelar"})}),e[90]=je,e[91]=B):B=e[91];let H;e[92]!==N?(H=N?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"mr-2 h-5 w-5 animate-spin"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"mr-2 h-5 w-5"}),"Confirmar Chamada"]}),e[92]=N,e[93]=H):H=e[93];let J;e[94]!==N||e[95]!==xe||e[96]!==H?(J=t.jsx(ne,{className:"w-full h-12 text-lg font-bold shadow-lg bg-blue-600 hover:bg-blue-700 text-white",size:"lg",onClick:xe,disabled:N,children:H}),e[94]=N,e[95]=xe,e[96]=H,e[97]=J):J=e[97];let M;e[98]!==B||e[99]!==J?(M=t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-10 md:static md:shadow-none md:border-t-0 md:bg-transparent",children:t.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-4",children:[B,J]})}),e[98]=B,e[99]=J,e[100]=M):M=e[100];let U;e[101]!==T||e[102]!==V||e[103]!==M?(U=t.jsxs("div",{className:"flex flex-col h-full bg-background relative pb-20",children:[" ",T,V,M]}),e[101]=T,e[102]=V,e[103]=M,e[104]=U):U=e[104];let oe;return e[105]!==s||e[106]!==C||e[107]!==U?(oe=t.jsxs(Oe,{breadcrumbs:s,children:[C,U]}),e[105]=s,e[106]=C,e[107]=U,e[108]=oe):oe=e[108],oe}function Ye(a){return t.jsx(Ee,{value:a.id.toString(),children:a.name},a.id)}function Ze(){return ye.error("Erro ao salvar frequência. Verifique os dados.")}function et(){return ye.success("Frequência salva com sucesso!")}function tt(a){return{id:a.id,status:a.status,observations:a.observations}}function st(a){return{id:a.id,status:a.status,observations:a.observations}}export{Rt as default};

import{c as pe,u as he,r as ne,j as t,H as xe,L as ie}from"./app-BlZNpJaz.js";import{B as se}from"./button-BFaAQ1F0.js";import{a as je,b as be,d as ve,C as ge,c as _e}from"./card-DE5xUgg4.js";import{I as Se}from"./input-ClKI_C3W.js";import{L as re}from"./label-D4nWcODD.js";import{A as Ne}from"./app-layout-vfDevXcM.js";import{A as ye}from"./AttendanceTable-DAMTWNjQ.js";import{T as Ce}from"./textarea-BfFOsk1d.js";import{t as oe}from"./index-Dzrob8QY.js";import{A as Le}from"./arrow-left-C_Tsc45O.js";import{L as we}from"./loader-circle-DIuL06p2.js";import{S as Ee}from"./save-zMiZTWPN.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-ePvy9ijt.js";import"./index-DWBLVih3.js";import"./createLucideIcon-G_Aima0p.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./table-DRoYhqJ6.js";import"./badge-hQq2_SSh.js";import"./popover-BAsQVsaB.js";import"./user-Bs0CfZmM.js";import"./check-C5YBzlMP.js";function ft(l){const e=pe.c(80),{classRoom:o,subject:m,date:d,students:a,diary:ae}=l;let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Frequência",href:"/admin/attendance"},{title:"Editar",href:""}],e[0]=D):D=e[0];const le=D,ce=o.id,me=m.id,J=ae?.classes_count||2,K=ae?.content||"";let u;e[1]!==a?(u=a.map(Te),e[1]=a,e[2]=u):u=e[2];let T;e[3]!==o.id||e[4]!==d||e[5]!==m.id||e[6]!==J||e[7]!==K||e[8]!==u?(T={class_room_id:ce,subject_id:me,date:d,classes_count:J,content:K,students:u},e[3]=o.id,e[4]=d,e[5]=m.id,e[6]=J,e[7]=K,e[8]=u,e[9]=T):T=e[9];const{data:n,setData:s,post:U,processing:f,errors:F}=he(T),[W,X]=ne.useState(a);let R;e[10]!==s||e[11]!==a?(R=()=>{X(a),s("students",a.map(De))},e[10]=s,e[11]=a,e[12]=R):R=e[12];let B;e[13]!==a?(B=[a],e[13]=a,e[14]=B):B=e[14],ne.useEffect(R,B);let H;e[15]!==n.students||e[16]!==s?(H=(i,q)=>{X(r=>r.map(c=>c.id===i?{...c,status:q}:c)),s("students",n.students.map(r=>r.id===i?{...r,status:q}:r))},e[15]=n.students,e[16]=s,e[17]=H):H=e[17];const Y=H;let I;e[18]!==n.students||e[19]!==s?(I=(i,q)=>{X(r=>r.map(c=>c.id===i?{...c,observations:q}:c)),s("students",n.students.map(r=>r.id===i?{...r,observations:q}:r))},e[18]=n.students,e[19]=s,e[20]=I):I=e[20];const Z=I;let k;e[21]!==U?(k=i=>{i.preventDefault(),U("/admin/attendance/batch",{onSuccess:qe,onError:Ae})},e[21]=U,e[22]=k):k=e[22];const ee=k,te=`Frequência - ${o.name}`;let p;e[23]!==te?(p=t.jsx(xe,{title:te}),e[23]=te,e[24]=p):p=e[24];let z,O;e[25]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(se,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(ie,{href:"/admin/attendance",children:t.jsx(Le,{className:"h-4 w-4"})})}),O=t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Editar Frequência"}),e[25]=z,e[26]=O):(z=e[25],O=e[26]);const de=o.name,ue=o.grade.name,fe=m.name;let h;e[27]!==d?(h=new Date(d+"T00:00:00").toLocaleDateString("pt-BR"),e[27]=d,e[28]=h):h=e[28];let x;e[29]!==o.grade.name||e[30]!==o.name||e[31]!==m.name||e[32]!==h?(x=t.jsxs("div",{className:"flex items-center gap-4",children:[z,t.jsxs("div",{children:[O,t.jsxs("p",{className:"text-muted-foreground",children:[de," - ",ue," • ",fe," • ",h]})]})]}),e[29]=o.grade.name,e[30]=o.name,e[31]=m.name,e[32]=h,e[33]=x):x=e[33];let $;e[34]===Symbol.for("react.memo_cache_sentinel")?($=t.jsxs(je,{children:[t.jsx(be,{children:"Dados da Aula"}),t.jsx(ve,{children:"Edite o conteúdo e quantidade de aulas."})]}),e[34]=$):$=e[34];let M;e[35]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(re,{children:"Quantidade de Aulas"}),e[35]=M):M=e[35];let j;e[36]!==s?(j=i=>s("classes_count",parseInt(i.target.value)),e[36]=s,e[37]=j):j=e[37];let b;e[38]!==n.classes_count||e[39]!==j?(b=t.jsx(Se,{type:"number",min:"1",max:"5",value:n.classes_count,onChange:j}),e[38]=n.classes_count,e[39]=j,e[40]=b):b=e[40];let v;e[41]!==F.classes_count?(v=F.classes_count&&t.jsx("p",{className:"text-sm text-red-500",children:F.classes_count}),e[41]=F.classes_count,e[42]=v):v=e[42];let g;e[43]!==b||e[44]!==v?(g=t.jsxs("div",{className:"space-y-2",children:[M,b,v]}),e[43]=b,e[44]=v,e[45]=g):g=e[45];let P;e[46]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(re,{children:"Conteúdo Ministrado"}),e[46]=P):P=e[46];let _;e[47]!==s?(_=i=>s("content",i.target.value),e[47]=s,e[48]=_):_=e[48];let S;e[49]!==n.content||e[50]!==_?(S=t.jsxs("div",{className:"space-y-2",children:[P,t.jsx(Ce,{placeholder:"Resumo do conteúdo...",value:n.content,onChange:_,className:"resize-none",rows:1})]}),e[49]=n.content,e[50]=_,e[51]=S):S=e[51];let N;e[52]!==g||e[53]!==S?(N=t.jsxs(ge,{children:[$,t.jsxs(_e,{className:"grid gap-6 md:grid-cols-2",children:[g,S]})]}),e[52]=g,e[53]=S,e[54]=N):N=e[54];let Q;e[55]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("h2",{className:"text-lg font-semibold",children:"Lista de Presença"}),e[55]=Q):Q=e[55];let y;e[56]!==a.length?(y=t.jsxs("div",{className:"flex items-center justify-between",children:[Q,t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",a.length," alunos"]})]}),e[56]=a.length,e[57]=y):y=e[57];let C;e[58]!==W||e[59]!==Z||e[60]!==Y?(C=t.jsx(ye,{students:W,onStatusChange:Y,onObservationChange:Z}),e[58]=W,e[59]=Z,e[60]=Y,e[61]=C):C=e[61];let L;e[62]!==y||e[63]!==C?(L=t.jsxs("div",{className:"space-y-2",children:[y,C]}),e[62]=y,e[63]=C,e[64]=L):L=e[64];let V;e[65]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(se,{variant:"outline",asChild:!0,children:t.jsx(ie,{href:"/admin/attendance",children:"Cancelar"})}),e[65]=V):V=e[65];let w;e[66]!==f?(w=f?t.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(Ee,{className:"mr-2 h-4 w-4"}),e[66]=f,e[67]=w):w=e[67];let E;e[68]!==f||e[69]!==w?(E=t.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[V,t.jsxs(se,{type:"submit",disabled:f,className:"min-w-[150px]",children:[w,"Salvar Alterações"]})]}),e[68]=f,e[69]=w,e[70]=E):E=e[70];let A;e[71]!==ee||e[72]!==x||e[73]!==N||e[74]!==L||e[75]!==E?(A=t.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-6 p-4 max-w-5xl mx-auto w-full",children:[x,N,L,E]}),e[71]=ee,e[72]=x,e[73]=N,e[74]=L,e[75]=E,e[76]=A):A=e[76];let G;return e[77]!==p||e[78]!==A?(G=t.jsxs(Ne,{breadcrumbs:le,children:[p,A]}),e[77]=p,e[78]=A,e[79]=G):G=e[79],G}function Ae(){return oe.error("Erro ao salvar frequência. Verifique os dados.")}function qe(){return oe.success("Frequência salva com sucesso!")}function De(l){return{id:l.id,status:l.status,observations:l.observations}}function Te(l){return{id:l.id,status:l.status,observations:l.observations}}export{ft as default};

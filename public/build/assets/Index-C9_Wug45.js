import{c as Te,u as Ae,r as de,j as s,a as Re,H as De}from"./app-BlZNpJaz.js";import{A as Be}from"./app-layout-vfDevXcM.js";import{a as fe,b as he,d as xe,C as me,c as ue}from"./card-DE5xUgg4.js";import{B as He}from"./button-BFaAQ1F0.js";import{L as pe}from"./label-D4nWcODD.js";import{a as je,b as ge,c as be,S as Se,d as Ce}from"./select-wa9XAM0x.js";import{C as Ne}from"./checkbox-BWg6pcGT.js";import{T as Me,d as Oe,b as Ve,e as ye}from"./table-DRoYhqJ6.js";import{t as D}from"./index-Dzrob8QY.js";import{L as ve}from"./loader-circle-DIuL06p2.js";import{c as Ie}from"./createLucideIcon-G_Aima0p.js";import{C as Pe}from"./check-C5YBzlMP.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-DWBLVih3.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-ePvy9ijt.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],ze=Ie("ArrowLeftRight",$e);function vs(a){const e=Te.c(106),{classes:r}=a;let B;e[0]===Symbol.for("react.memo_cache_sentinel")?(B=[{title:"Painel",href:"/secretaria/dashboard"},{title:"Enturmação em Lote",href:"/secretaria/batch-enrollment"}],e[0]=B):B=e[0];const we=B;let H;e[1]===Symbol.for("react.memo_cache_sentinel")?(H=[],e[1]=H):H=e[1];let M;e[2]===Symbol.for("react.memo_cache_sentinel")?(M={source_class_id:"",destination_class_id:"",student_ids:H},e[2]=M):M=e[2];const{data:t,setData:i,post:le,processing:O,reset:ie}=Ae(M);let V;e[3]===Symbol.for("react.memo_cache_sentinel")?(V=[],e[3]=V):V=e[3];const[n,ae]=de.useState(V),[A,_e]=de.useState(!1);let I;e[4]!==t.source_class_id||e[5]!==i?(I=()=>{if(!t.source_class_id){ae([]);return}_e(!0),Re.get(`/admin/api/classes/${t.source_class_id}/students`).then(l=>{ae(l.data),i("student_ids",[])}).catch(Ke).finally(()=>_e(!1))},e[4]=t.source_class_id,e[5]=i,e[6]=I):I=e[6];let P;e[7]!==t.source_class_id?(P=[t.source_class_id],e[7]=t.source_class_id,e[8]=P):P=e[8],de.useEffect(I,P);let $;e[9]!==i||e[10]!==n?($=l=>{l?i("student_ids",n.map(Je)):i("student_ids",[])},e[9]=i,e[10]=n,e[11]=$):$=e[11];const re=$;let z;e[12]!==t.student_ids||e[13]!==i?(z=(l,R)=>{R?i("student_ids",[...t.student_ids,l]):i("student_ids",t.student_ids.filter(Ee=>Ee!==l))},e[12]=t.student_ids,e[13]=i,e[14]=z):z=e[14];const ne=z;let F;e[15]!==t.destination_class_id||e[16]!==t.source_class_id||e[17]!==t.student_ids.length||e[18]!==le||e[19]!==ie||e[20]!==i?(F=l=>{if(l.preventDefault(),t.student_ids.length===0){D.error("Selecione pelo menos um aluno.");return}if(t.source_class_id===t.destination_class_id){D.error("A turma de destino deve ser diferente da turma de origem.");return}le("/secretaria/batch-enrollment",{onSuccess:()=>{D.success("Alunos movidos com sucesso!"),ae([]),i("source_class_id",""),ie()},onError:Ge})},e[15]=t.destination_class_id,e[16]=t.source_class_id,e[17]=t.student_ids.length,e[18]=le,e[19]=ie,e[20]=i,e[21]=F):F=e[21];const ce=F;let q;e[22]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(De,{title:"Enturmação em Lote"}),e[22]=q):q=e[22];let G;e[23]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Enturmação em Lote"}),s.jsx("p",{className:"text-muted-foreground",children:"Mova alunos de uma turma para outra massivamente."})]}),e[23]=G):G=e[23];let J;e[24]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsxs(fe,{children:[s.jsx(he,{children:"1. Origem"}),s.jsx(xe,{children:"Selecione a turma atual dos alunos."})]}),e[24]=J):J=e[24];let K;e[25]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(pe,{children:"Turma de Origem"}),e[25]=K):K=e[25];const Le=t.source_class_id;let c;e[26]!==i?(c=l=>i("source_class_id",l),e[26]=i,e[27]=c):c=e[27];let Q;e[28]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(je,{children:s.jsx(ge,{placeholder:"Selecione a turma..."})}),e[28]=Q):Q=e[28];let o;e[29]!==r?(o=r.map(qe),e[29]=r,e[30]=o):o=e[30];let d;e[31]!==o?(d=s.jsx(be,{children:o}),e[31]=o,e[32]=d):d=e[32];let m;e[33]!==t.source_class_id||e[34]!==c||e[35]!==d?(m=s.jsxs(Se,{value:Le,onValueChange:c,children:[Q,d]}),e[33]=t.source_class_id,e[34]=c,e[35]=d,e[36]=m):m=e[36];let u;e[37]!==t.destination_class_id||e[38]!==t.source_class_id?(u=t.destination_class_id&&t.source_class_id===t.destination_class_id&&s.jsx("p",{className:"text-sm text-red-500",children:"Origem e destino não podem ser iguais."}),e[37]=t.destination_class_id,e[38]=t.source_class_id,e[39]=u):u=e[39];let _;e[40]!==m||e[41]!==u?(_=s.jsxs("div",{className:"space-y-2",children:[K,m,u]}),e[40]=m,e[41]=u,e[42]=_):_=e[42];let f;e[43]!==t.source_class_id||e[44]!==t.student_ids||e[45]!==re||e[46]!==ne||e[47]!==A||e[48]!==n?(f=t.source_class_id&&s.jsxs("div",{className:"border rounded-md mt-4",children:[s.jsxs("div",{className:"p-3 bg-muted/50 border-b flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{checked:n.length>0&&t.student_ids.length===n.length,onCheckedChange:re,disabled:A||n.length===0}),s.jsxs("span",{className:"text-sm font-medium",children:["Alunos (",t.student_ids.length,"/",n.length,")"]})]}),A&&s.jsx(ve,{className:"h-4 w-4 animate-spin"})]}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto p-1",children:n.length>0?s.jsx(Me,{children:s.jsx(Oe,{children:n.map(l=>s.jsxs(Ve,{className:"hover:bg-muted/50",children:[s.jsx(ye,{className:"p-2 w-[40px]",children:s.jsx(Ne,{checked:t.student_ids.includes(l.id),onCheckedChange:R=>ne(l.id,R)})}),s.jsx(ye,{className:"p-2 text-sm",children:l.name})]},l.id))})}):s.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground",children:A?"Carregando alunos...":"Nenhum aluno nesta turma."})})]}),e[43]=t.source_class_id,e[44]=t.student_ids,e[45]=re,e[46]=ne,e[47]=A,e[48]=n,e[49]=f):f=e[49];let h;e[50]!==_||e[51]!==f?(h=s.jsxs(me,{className:"border-l-4 border-l-blue-500",children:[J,s.jsxs(ue,{className:"space-y-4",children:[_,f]})]}),e[50]=_,e[51]=f,e[52]=h):h=e[52];let U;e[53]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(fe,{children:[s.jsx(he,{children:"2. Destino"}),s.jsx(xe,{children:"Para onde os alunos selecionados irão."})]}),e[53]=U):U=e[53];let W;e[54]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(pe,{children:"Turma de Destino"}),e[54]=W):W=e[54];const ke=t.destination_class_id;let x;e[55]!==i?(x=l=>i("destination_class_id",l),e[55]=i,e[56]=x):x=e[56];let X;e[57]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(je,{children:s.jsx(ge,{placeholder:"Selecione a turma..."})}),e[57]=X):X=e[57];let p;if(e[58]!==r||e[59]!==t.source_class_id){let l;e[61]!==t.source_class_id?(l=R=>String(R.id)!==t.source_class_id,e[61]=t.source_class_id,e[62]=l):l=e[62],p=r.filter(l).map(Fe),e[58]=r,e[59]=t.source_class_id,e[60]=p}else p=e[60];let j;e[63]!==p?(j=s.jsx(be,{children:p}),e[63]=p,e[64]=j):j=e[64];let g;e[65]!==t.destination_class_id||e[66]!==x||e[67]!==j?(g=s.jsxs(me,{className:"border-l-4 border-l-green-500",children:[U,s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[W,s.jsxs(Se,{value:ke,onValueChange:x,children:[X,j]})]})})]}),e[65]=t.destination_class_id,e[66]=x,e[67]=j,e[68]=g):g=e[68];let Y,Z;e[69]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:s.jsx(ze,{className:"h-6 w-6"})}),Z=s.jsx("h3",{className:"font-semibold text-lg",children:"Resumo da Ação"}),e[69]=Y,e[70]=Z):(Y=e[69],Z=e[70]);let b;e[71]!==t.student_ids.length?(b=s.jsxs("span",{className:"font-bold text-foreground",children:[t.student_ids.length," alunos"]}),e[71]=t.student_ids.length,e[72]=b):b=e[72];let ee;e[73]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("br",{}),e[73]=ee):ee=e[73];let S;e[74]!==r||e[75]!==t.source_class_id?(S=r.find(l=>String(l.id)===t.source_class_id)?.name||"...",e[74]=r,e[75]=t.source_class_id,e[76]=S):S=e[76];let N;e[77]!==S?(N=s.jsx("span",{className:"font-medium text-foreground",children:S}),e[77]=S,e[78]=N):N=e[78];let se;e[79]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("br",{}),e[79]=se):se=e[79];let y;e[80]!==r||e[81]!==t.destination_class_id?(y=r.find(l=>String(l.id)===t.destination_class_id)?.name||"...",e[80]=r,e[81]=t.destination_class_id,e[82]=y):y=e[82];let v;e[83]!==y?(v=s.jsx("span",{className:"font-medium text-foreground",children:y}),e[83]=y,e[84]=v):v=e[84];let C;e[85]!==b||e[86]!==N||e[87]!==v?(C=s.jsxs("div",{children:[Z,s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Você está movendo ",b," ",ee,"da turma ",N," ",se,"para ",v,"."]})]}),e[85]=b,e[86]=N,e[87]=v,e[88]=C):C=e[88];const oe=O||t.student_ids.length===0||!t.destination_class_id;let w;e[89]!==O?(w=O?s.jsx(ve,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Pe,{className:"mr-2 h-4 w-4"}),e[89]=O,e[90]=w):w=e[90];let L;e[91]!==oe||e[92]!==w?(L=s.jsxs(He,{size:"lg",className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:oe,children:[w,"Confirmar Transferência"]}),e[91]=oe,e[92]=w,e[93]=L):L=e[93];let k;e[94]!==C||e[95]!==L?(k=s.jsx(me,{className:"bg-slate-50 border-dashed",children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col gap-4 text-center items-center",children:[Y,C,L]})})}),e[94]=C,e[95]=L,e[96]=k):k=e[96];let E;e[97]!==g||e[98]!==k?(E=s.jsxs("div",{className:"space-y-6",children:[g,k]}),e[97]=g,e[98]=k,e[99]=E):E=e[99];let T;e[100]!==h||e[101]!==E?(T=s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-start",children:[h,E]}),e[100]=h,e[101]=E,e[102]=T):T=e[102];let te;return e[103]!==ce||e[104]!==T?(te=s.jsxs(Be,{breadcrumbs:we,children:[q,s.jsx("div",{className:"flex h-full flex-col gap-4 p-4 md:p-8",children:s.jsxs("div",{className:"mx-auto w-full max-w-5xl space-y-6",children:[G,s.jsx("form",{onSubmit:ce,children:T})]})})]}),e[103]=ce,e[104]=T,e[105]=te):te=e[105],te}function Fe(a){return s.jsx(Ce,{value:String(a.id),children:a.full_label},a.id)}function qe(a){return s.jsx(Ce,{value:String(a.id),children:a.full_label},a.id)}function Ge(){D.error("Ocorreu um erro ao mover os alunos.")}function Je(a){return a.id}function Ke(a){console.error(a),D.error("Erro ao buscar alunos da turma de origem.")}export{vs as default};

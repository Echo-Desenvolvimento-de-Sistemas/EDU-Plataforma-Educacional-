import{c as $,j as t,H as D,L as H}from"./app-BlZNpJaz.js";import{A as R}from"./app-layout-vfDevXcM.js";import{a as T,b as E,C as F,c as q}from"./card-DE5xUgg4.js";import{P as z}from"./progress-B9iS4PMZ.js";import{B as G}from"./button-BFaAQ1F0.js";import{A as I}from"./arrow-left-C_Tsc45O.js";import{C as B}from"./clock-DL2owC6n.js";import{C as J}from"./circle-alert-CAGRjitk.js";import{C as M}from"./circle-x-rOJR2NhE.js";import{C as O}from"./circle-check-big-Z2DzYajz.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-DWBLVih3.js";import"./createLucideIcon-G_Aima0p.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-ePvy9ijt.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";const Q=s=>{switch(s){case"present":return t.jsx(O,{className:"w-4 h-4 text-green-500"});case"absent":return t.jsx(M,{className:"w-4 h-4 text-red-500"});case"justified":return t.jsx(J,{className:"w-4 h-4 text-yellow-500"});case"late":return t.jsx(B,{className:"w-4 h-4 text-orange-500"});default:return null}},X=s=>{switch(s){case"present":return"Presença";case"absent":return"Falta";case"justified":return"Justificada";case"late":return"Atraso";default:return s}},K=s=>{switch(s){case"present":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"absent":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"justified":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"late":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-gray-100 text-gray-800"}};function ke(s){const e=$.c(41),{student:a,subjects:l}=s;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={title:"Alunos",href:"/admin/students"},e[0]=g):g=e[0];let n;e[1]!==a.name?(n={title:a.name,href:""},e[1]=a.name,e[2]=n):n=e[2];let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j={title:"Frequência",href:""},e[3]=j):j=e[3];let N;e[4]!==n?(N=[g,n,j],e[4]=n,e[5]=N):N=e[5];const _=N,b=l.reduce(Y,0),k=l.reduce(W,0);let v;e[6]!==k||e[7]!==b?(v=b>0?Math.round(k/b*100):100,e[6]=k,e[7]=b,e[8]=v):v=e[8];const r=v,S=`Frequência - ${a.name}`;let i;e[9]!==S?(i=t.jsx(D,{title:S}),e[9]=S,e[10]=i):i=e[10];let w;e[11]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(G,{variant:"ghost",size:"icon",asChild:!0,className:"-ml-2",children:t.jsx(H,{href:"/admin/students",children:t.jsx(I,{className:"h-5 w-5"})})}),e[11]=w):w=e[11];let c;e[12]!==a.name?(c=t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w,t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:a.name})]}),e[12]=a.name,e[13]=c):c=e[13];const A=a.class_room?.name,L=a.class_room?.grade.name;let o;e[14]!==A||e[15]!==L?(o=t.jsxs("p",{className:"text-muted-foreground ml-10",children:[A," - ",L]}),e[14]=A,e[15]=L,e[16]=o):o=e[16];let d;e[17]!==o||e[18]!==c?(d=t.jsxs("div",{children:[c,o]}),e[17]=o,e[18]=c,e[19]=d):d=e[19];let y;e[20]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(T,{className:"pb-2",children:t.jsx(E,{className:"text-sm font-medium text-muted-foreground",children:"Frequência Global"})}),e[20]=y):y=e[20];let m;e[21]!==r?(m=t.jsxs("div",{className:"text-3xl font-bold",children:[r,"%"]}),e[21]=r,e[22]=m):m=e[22];const P=r<75?"bg-red-500":"bg-green-500";let x;e[23]!==r||e[24]!==P?(x=t.jsx(z,{value:r,className:"h-2 mt-2",indicatorClassName:P}),e[23]=r,e[24]=P,e[25]=x):x=e[25];let u;e[26]!==m||e[27]!==x?(u=t.jsxs(F,{className:"min-w-[200px]",children:[y,t.jsxs(q,{children:[m,x]})]}),e[26]=m,e[27]=x,e[28]=u):u=e[28];let f;e[29]!==d||e[30]!==u?(f=t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[d,u]}),e[29]=d,e[30]=u,e[31]=f):f=e[31];let p;e[32]!==l?(p=l.length===0?t.jsx("div",{className:"text-center p-12 text-muted-foreground",children:"Nenhum registro de frequência encontrado."}):t.jsx("div",{className:"grid grid-cols-1 gap-6",children:l.map(U)}),e[32]=l,e[33]=p):p=e[33];let h;e[34]!==f||e[35]!==p?(h=t.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[f,p]}),e[34]=f,e[35]=p,e[36]=h):h=e[36];let C;return e[37]!==_||e[38]!==h||e[39]!==i?(C=t.jsxs(R,{breadcrumbs:_,children:[i,h]}),e[37]=_,e[38]=h,e[39]=i,e[40]=C):C=e[40],C}function U(s){return t.jsxs(F,{className:"overflow-hidden",children:[t.jsxs("div",{className:"border-b bg-muted/40 p-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-full ${s.stats.percentage<75?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:t.jsx(B,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:s.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.stats.total_classes," aulas registradas"]})]})]}),t.jsxs("div",{className:"flex items-center gap-6 w-full sm:w-auto",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Presenças"}),t.jsx("div",{className:"font-mono font-bold text-green-600",children:s.stats.presences})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Faltas"}),t.jsx("div",{className:"font-mono font-bold text-red-600",children:s.stats.absences})]}),t.jsx("div",{className:"text-center border-l pl-6",children:t.jsxs("div",{className:"text-2xl font-bold",children:[s.stats.percentage,"%"]})})]})]}),t.jsx(q,{className:"p-0",children:t.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-muted-foreground uppercase bg-muted/20 sticky top-0 backdrop-blur-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3",children:"Data"}),t.jsx("th",{className:"px-6 py-3",children:"Status"}),t.jsx("th",{className:"px-6 py-3",children:"Qtd. Aulas"}),t.jsx("th",{className:"px-6 py-3",children:"Conteúdo / Obs"})]})}),t.jsx("tbody",{className:"divide-y",children:s.records.map(V)})]})})})]},s.id)}function V(s,e){return t.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-3 font-medium",children:new Date(s.date+"T00:00:00").toLocaleDateString("pt-BR")}),t.jsx("td",{className:"px-6 py-3",children:t.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium border ${K(s.status)}`,children:[Q(s.status),X(s.status)]})}),t.jsx("td",{className:"px-6 py-3 text-center w-[100px]",children:s.classes_count}),t.jsx("td",{className:"px-6 py-3 text-muted-foreground max-w-md truncate",children:s.content||s.observations||"-"})]},e)}function W(s,e){return s+e.stats.presences+e.stats.justified+e.stats.late}function Y(s,e){return s+e.stats.total_classes}export{ke as default};

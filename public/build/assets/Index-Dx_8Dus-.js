import{r as l,u as Q,j as e,H as q,b as F}from"./app-BlZNpJaz.js";import{A as G}from"./app-layout-vfDevXcM.js";import{C as h,a as j,b as u,d as P,c as p}from"./card-DE5xUgg4.js";import{B as y}from"./button-BFaAQ1F0.js";import{L as t}from"./label-D4nWcODD.js";import{S as f,a as _,b as g,c as S,d as b}from"./select-wa9XAM0x.js";import{I as w}from"./input-ClKI_C3W.js";import{T as R,a as $,b as T,c,d as Y,e as n}from"./table-DRoYhqJ6.js";import{t as m}from"./index-Dzrob8QY.js";import{T as J}from"./trash-2-C65_v2RJ.js";import{P as K}from"./plus-CcX2yXqX.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-DWBLVih3.js";import"./createLucideIcon-G_Aima0p.js";import"./index-II6TlMg7.js";import"./Combination-CQbiwxas.js";import"./index-ePvy9ijt.js";import"./index-CClcdcON.js";import"./index-DSX7JKB1.js";import"./index-20W_Bwtk.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";import"./index-DPYlP-Xg.js";import"./chevron-down-BzXkxksi.js";import"./check-C5YBzlMP.js";const M=[{title:"Horários",href:"/admin/class-schedules"}],H=["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"];function Te({classRooms:D,subjects:k}){const[r,A]=l.useState(""),[v,C]=l.useState([]),[I,N]=l.useState(!1),{data:d,setData:i,post:E,processing:V,reset:O,errors:a}=Q({class_room_id:"",subject_id:"",day_of_week:"1",start_time:"07:30",end_time:"08:20"});l.useEffect(()=>{r?(x(r),i("class_room_id",r)):C([])},[r]);const x=async s=>{N(!0);try{const B=await(await fetch(`/admin/class-schedules/${s}`)).json();C(B)}catch{m.error("Erro ao buscar horários.")}finally{N(!1)}},L=s=>{s.preventDefault(),E("/admin/class-schedules",{onSuccess:()=>{m.success("Horário adicionado!"),x(r)},onError:()=>m.error("Verifique os dados informados.")})},z=s=>{confirm("Tem certeza?")&&F.delete(`/admin/class-schedules/${s}`,{onSuccess:()=>{m.success("Horário removido."),x(r)}})};return e.jsxs(G,{breadcrumbs:M,children:[e.jsx(q,{title:"Gerenciar Horários"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"Gerenciar Horários de Aulas"}),e.jsx(P,{children:"Selecione uma turma para visualizar e editar o quadro de horários."})]}),e.jsx(p,{children:e.jsxs("div",{className:"max-w-md",children:[e.jsx(t,{children:"Turma"}),e.jsxs(f,{value:r,onValueChange:A,children:[e.jsx(_,{children:e.jsx(g,{placeholder:"Selecione a turma..."})}),e.jsx(S,{children:D.map(s=>e.jsx(b,{value:s.id.toString(),children:s.name},s.id))})]})]})})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"md:col-span-2",children:[e.jsx(j,{children:e.jsx(u,{children:"Quadro de Horários"})}),e.jsx(p,{children:I?e.jsx("p",{children:"Carregando..."}):v.length===0?e.jsx("p",{className:"text-muted-foreground",children:"Nenhum horário cadastrado."}):e.jsxs(R,{children:[e.jsx($,{children:e.jsxs(T,{children:[e.jsx(c,{children:"Dia"}),e.jsx(c,{children:"Horário"}),e.jsx(c,{children:"Disciplina"}),e.jsx(c,{className:"w-[50px]"})]})}),e.jsx(Y,{children:v.map(s=>e.jsxs(T,{children:[e.jsx(n,{className:"font-medium",children:H[s.day_of_week]}),e.jsxs(n,{children:[s.start_time.slice(0,5)," - ",s.end_time.slice(0,5)]}),e.jsx(n,{children:s.subject.name}),e.jsx(n,{children:e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>z(s.id),children:e.jsx(J,{className:"w-4 h-4 text-destructive"})})})]},s.id))})]})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(u,{children:"Adicionar Aula"})}),e.jsx(p,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Dia da Semana"}),e.jsxs(f,{value:d.day_of_week.toString(),onValueChange:s=>i("day_of_week",s),children:[e.jsx(_,{children:e.jsx(g,{})}),e.jsx(S,{children:H.map((s,o)=>e.jsx(b,{value:o.toString(),children:s},o))})]}),a.day_of_week&&e.jsx("span",{className:"text-red-500 text-xs",children:a.day_of_week})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Disciplina"}),e.jsxs(f,{value:d.subject_id,onValueChange:s=>i("subject_id",s),children:[e.jsx(_,{children:e.jsx(g,{placeholder:"Selecione..."})}),e.jsx(S,{children:k.map(s=>e.jsx(b,{value:s.id.toString(),children:s.name},s.id))})]}),a.subject_id&&e.jsx("span",{className:"text-red-500 text-xs",children:a.subject_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Início"}),e.jsx(w,{type:"time",value:d.start_time,onChange:s=>i("start_time",s.target.value)}),a.start_time&&e.jsx("span",{className:"text-red-500 text-xs",children:a.start_time})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Fim"}),e.jsx(w,{type:"time",value:d.end_time,onChange:s=>i("end_time",s.target.value)}),a.end_time&&e.jsx("span",{className:"text-red-500 text-xs",children:a.end_time})]})]}),e.jsxs(y,{type:"submit",className:"w-full",disabled:V,children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]})})]})]})]})]})}export{Te as default};

import{c as el,r as X,j as l,b as O,H as ll}from"./app-BlZNpJaz.js";import{B as sl}from"./badge-hQq2_SSh.js";import{B as Z}from"./button-BFaAQ1F0.js";import{a as tl,b as al,C as il,c as rl}from"./card-DE5xUgg4.js";import{C as Je}from"./checkbox-BWg6pcGT.js";import{I as nl}from"./input-ClKI_C3W.js";import{L as ee}from"./label-D4nWcODD.js";import{a as Be,b as Ve,d as f,c as Ge,S as Ie}from"./select-wa9XAM0x.js";import{S as Ke}from"./separator-RbYn2Kme.js";import{A as cl}from"./app-layout-vfDevXcM.js";import{t as le}from"./index-Dzrob8QY.js";import{S as ol}from"./save-zMiZTWPN.js";import{T as ml}from"./trash-2-C65_v2RJ.js";/* empty css            */import"./index-BSNktiLJ.js";import"./utils-CTsRgsKi.js";import"./index-II6TlMg7.js";import"./index-DPYlP-Xg.js";import"./index-DSX7JKB1.js";import"./index-ePvy9ijt.js";import"./check-C5YBzlMP.js";import"./createLucideIcon-G_Aima0p.js";import"./index-20W_Bwtk.js";import"./Combination-CQbiwxas.js";import"./index-CClcdcON.js";import"./chevron-down-BzXkxksi.js";import"./index-DWBLVih3.js";import"./index-kh-3lYpY.js";import"./index-jOkOEACf.js";import"./settings-DDioBNBR.js";import"./users-CYmdu12r.js";import"./file-text-BPl73Zr-.js";import"./chevron-right-BaSAJNUd.js";function Ol(a){const e=el.c(137),{students:t,classRooms:h,academicYears:Le,grades:Re,filters:Q}=a;let se;e[0]===Symbol.for("react.memo_cache_sentinel")?(se=[],e[0]=se):se=e[0];const[i,W]=X.useState(se),[r,Me]=X.useState(Q.class_room_id||""),[o,Oe]=X.useState(Q.search||""),[n,Qe]=X.useState(Q.academic_year_id||""),[c,We]=X.useState(Q.grade_id||"");let te;e[1]!==o||e[2]!==c||e[3]!==n||e[4]!==r?(te=s=>{s.preventDefault(),O.get("/admin/ensalamento",{academic_year_id:n,grade_id:c,class_room_id:r,search:o},{preserveState:!0})},e[1]=o,e[2]=c,e[3]=n,e[4]=r,e[5]=te):te=e[5];const De=te;let ae;e[6]!==o||e[7]!==c||e[8]!==n||e[9]!==r?(ae=(s,d)=>{O.get("/admin/ensalamento",{academic_year_id:s==="academic_year_id"?d:n,grade_id:s==="grade_id"?d:c,class_room_id:s==="class_room_id"?d:r,search:o},{preserveState:!0})},e[6]=o,e[7]=c,e[8]=n,e[9]=r,e[10]=ae):ae=e[10];const m=ae;let ie;e[11]===Symbol.for("react.memo_cache_sentinel")?(ie=s=>{W(d=>d.includes(s)?d.filter(Ze=>Ze!==s):[...d,s])},e[11]=ie):ie=e[11];const Xe=ie;let re;e[12]!==i||e[13]!==r?(re=()=>{if(!r){le.error("Selecione uma turma de destino.");return}if(i.length===0){le.error("Selecione pelo menos um aluno.");return}O.post("/admin/ensalamento",{class_room_id:r,student_ids:i},{onSuccess:()=>{le.success("Alunos enturmados com sucesso!"),W([])}})},e[12]=i,e[13]=r,e[14]=re):re=e[14];const He=re;let ne;e[15]!==i?(ne=()=>{if(i.length===0){le.error("Selecione pelo menos um aluno.");return}confirm("Tem certeza que deseja remover os alunos selecionados da turma?")&&O.delete("/admin/ensalamento",{data:{student_ids:i},onSuccess:()=>{le.success("Alunos removidos da turma com sucesso!"),W([])}})},e[15]=i,e[16]=ne):ne=e[16];const Ye=ne;let ce,oe;e[17]===Symbol.for("react.memo_cache_sentinel")?(ce=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Ensalamento",href:"/admin/ensalamento"}],oe=l.jsx(ll,{title:"Ensalamento"}),e[17]=ce,e[18]=oe):(ce=e[17],oe=e[18]);let me;e[19]===Symbol.for("react.memo_cache_sentinel")?(me=l.jsx(tl,{children:l.jsx(al,{children:"Gerenciar Enturmação"})}),e[19]=me):me=e[19];let de;e[20]===Symbol.for("react.memo_cache_sentinel")?(de=l.jsx(ee,{children:"Ano Letivo"}),e[20]=de):de=e[20];let u;e[21]!==m?(u=s=>{Qe(s),m("academic_year_id",s)},e[21]=m,e[22]=u):u=e[22];let fe;e[23]===Symbol.for("react.memo_cache_sentinel")?(fe=l.jsx(Be,{children:l.jsx(Ve,{placeholder:"Ano"})}),e[23]=fe):fe=e[23];let he;e[24]===Symbol.for("react.memo_cache_sentinel")?(he=l.jsx(f,{value:"all",children:"Todos"}),e[24]=he):he=e[24];let x;e[25]!==Le?(x=Le.map(xl),e[25]=Le,e[26]=x):x=e[26];let p;e[27]!==x?(p=l.jsxs(Ge,{children:[he,x]}),e[27]=x,e[28]=p):p=e[28];let _;e[29]!==n||e[30]!==u||e[31]!==p?(_=l.jsxs("div",{children:[de,l.jsxs(Ie,{value:n,onValueChange:u,children:[fe,p]})]}),e[29]=n,e[30]=u,e[31]=p,e[32]=_):_=e[32];let ue;e[33]===Symbol.for("react.memo_cache_sentinel")?(ue=l.jsx(ee,{children:"Série/Grade"}),e[33]=ue):ue=e[33];let j;e[34]!==m?(j=s=>{We(s),m("grade_id",s)},e[34]=m,e[35]=j):j=e[35];let xe;e[36]===Symbol.for("react.memo_cache_sentinel")?(xe=l.jsx(Be,{children:l.jsx(Ve,{placeholder:"Série"})}),e[36]=xe):xe=e[36];let pe;e[37]===Symbol.for("react.memo_cache_sentinel")?(pe=l.jsx(f,{value:"all",children:"Todas"}),e[37]=pe):pe=e[37];let g;e[38]!==Re?(g=Re.map(ul),e[38]=Re,e[39]=g):g=e[39];let S;e[40]!==g?(S=l.jsxs(Ge,{children:[pe,g]}),e[40]=g,e[41]=S):S=e[41];let b;e[42]!==c||e[43]!==j||e[44]!==S?(b=l.jsxs("div",{children:[ue,l.jsxs(Ie,{value:c,onValueChange:j,children:[xe,S]})]}),e[42]=c,e[43]=j,e[44]=S,e[45]=b):b=e[45];let _e;e[46]===Symbol.for("react.memo_cache_sentinel")?(_e=l.jsx(ee,{children:"Filtrar por Turma Atual"}),e[46]=_e):_e=e[46];const Fe=Q.class_room_id||"all";let v;e[47]!==m?(v=s=>m("class_room_id",s==="all"?"":s),e[47]=m,e[48]=v):v=e[48];const qe=!n&&!c;let je;e[49]===Symbol.for("react.memo_cache_sentinel")?(je=l.jsx(Be,{children:l.jsx(Ve,{placeholder:"Selecione uma turma para ver seus alunos"})}),e[49]=je):je=e[49];let ge;e[50]===Symbol.for("react.memo_cache_sentinel")?(ge=l.jsx(f,{value:"all",children:"Todas (ou sem turma)"}),e[50]=ge):ge=e[50];let y;e[51]!==h?(y=h.map(hl),e[51]=h,e[52]=y):y=e[52];let N;e[53]!==y?(N=l.jsxs(Ge,{children:[ge,y]}),e[53]=y,e[54]=N):N=e[54];let C;e[55]!==Fe||e[56]!==v||e[57]!==qe||e[58]!==N?(C=l.jsxs("div",{className:"col-span-2",children:[_e,l.jsxs(Ie,{value:Fe,onValueChange:v,disabled:qe,children:[je,N]})]}),e[55]=Fe,e[56]=v,e[57]=qe,e[58]=N,e[59]=C):C=e[59];let k;e[60]!==_||e[61]!==b||e[62]!==C?(k=l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[_,b,C]}),e[60]=_,e[61]=b,e[62]=C,e[63]=k):k=e[63];let Se;e[64]===Symbol.for("react.memo_cache_sentinel")?(Se=l.jsx(ee,{children:"Buscar Aluno"}),e[64]=Se):Se=e[64];let be;e[65]===Symbol.for("react.memo_cache_sentinel")?(be=s=>Oe(s.target.value),e[65]=be):be=e[65];let T;e[66]!==o?(T=l.jsxs("div",{className:"flex-1",children:[Se,l.jsx(nl,{value:o,onChange:be,placeholder:"Nome do aluno..."})]}),e[66]=o,e[67]=T):T=e[67];let A;e[68]!==De?(A=l.jsx(Z,{onClick:De,variant:"secondary",children:"Buscar"}),e[68]=De,e[69]=A):A=e[69];let w;e[70]!==T||e[71]!==A?(w=l.jsxs("div",{className:"flex items-end gap-4",children:[T,A]}),e[70]=T,e[71]=A,e[72]=w):w=e[72];let ve;e[73]===Symbol.for("react.memo_cache_sentinel")?(ve=l.jsx(Ke,{}),e[73]=ve):ve=e[73];let ye;e[74]===Symbol.for("react.memo_cache_sentinel")?(ye=l.jsx(ee,{children:"Turma de Destino"}),e[74]=ye):ye=e[74];let Ne;e[75]===Symbol.for("react.memo_cache_sentinel")?(Ne=l.jsx(Be,{children:l.jsx(Ve,{placeholder:"Selecione a turma para enturmar"})}),e[75]=Ne):Ne=e[75];let E;e[76]!==h?(E=h.map(fl),e[76]=h,e[77]=E):E=e[77];let B;e[78]!==E?(B=l.jsx(Ge,{children:E}),e[78]=E,e[79]=B):B=e[79];let V;e[80]!==B||e[81]!==r?(V=l.jsxs("div",{className:"w-full md:w-1/3",children:[ye,l.jsxs(Ie,{value:r,onValueChange:Me,children:[Ne,B]})]}),e[80]=B,e[81]=r,e[82]=V):V=e[82];const ze=!r||i.length===0;let Ce;e[83]===Symbol.for("react.memo_cache_sentinel")?(Ce=l.jsx(ol,{className:"mr-2 h-4 w-4"}),e[83]=Ce):Ce=e[83];let G;e[84]!==He||e[85]!==ze?(G=l.jsxs(Z,{onClick:He,disabled:ze,children:[Ce,"Enturmar Selecionados"]}),e[84]=He,e[85]=ze,e[86]=G):G=e[86];const Pe=i.length===0;let ke;e[87]===Symbol.for("react.memo_cache_sentinel")?(ke=l.jsx(ml,{className:"mr-2 h-4 w-4"}),e[87]=ke):ke=e[87];let I;e[88]!==Ye||e[89]!==Pe?(I=l.jsxs(Z,{variant:"destructive",onClick:Ye,disabled:Pe,children:[ke,"Remover da Turma"]}),e[88]=Ye,e[89]=Pe,e[90]=I):I=e[90];let L;e[91]!==G||e[92]!==I?(L=l.jsxs("div",{className:"flex gap-2",children:[G,I]}),e[91]=G,e[92]=I,e[93]=L):L=e[93];let R;e[94]!==V||e[95]!==L?(R=l.jsxs("div",{className:"flex flex-col gap-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-900 md:flex-row md:items-end md:justify-between",children:[V,L]}),e[94]=V,e[95]=L,e[96]=R):R=e[96];let Te;e[97]===Symbol.for("react.memo_cache_sentinel")?(Te=l.jsx(Ke,{}),e[97]=Te):Te=e[97];let D;e[98]!==i||e[99]!==t.data?(D=t.data.length>0&&t.data.every(s=>i.includes(s.id)),e[98]=i,e[99]=t.data,e[100]=D):D=e[100];let H;e[101]!==t.data?(H=s=>{W(s?t.data.map(dl):[])},e[101]=t.data,e[102]=H):H=e[102];let Y;e[103]!==D||e[104]!==H?(Y=l.jsx("div",{className:"col-span-1 flex justify-center",children:l.jsx(Je,{checked:D,onCheckedChange:H})}),e[103]=D,e[104]=H,e[105]=Y):Y=e[105];let Ae,we;e[106]===Symbol.for("react.memo_cache_sentinel")?(Ae=l.jsx("div",{className:"col-span-6",children:"Nome"}),we=l.jsx("div",{className:"col-span-5",children:"Turma Atual"}),e[106]=Ae,e[107]=we):(Ae=e[106],we=e[107]);let F;e[108]!==Y?(F=l.jsxs("div",{className:"grid grid-cols-12 gap-4 bg-gray-100 p-2 font-medium dark:bg-gray-800",children:[Y,Ae,we]}),e[108]=Y,e[109]=F):F=e[109];let q;e[110]!==i||e[111]!==t.data?(q=t.data.length===0?l.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhum aluno encontrado."}):t.data.map(s=>l.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b p-2 last:border-0 hover:bg-gray-50 dark:hover:bg-gray-900",children:[l.jsx("div",{className:"col-span-1 flex justify-center",children:l.jsx(Je,{checked:i.includes(s.id),onCheckedChange:()=>Xe(s.id)})}),l.jsx("div",{className:"col-span-6 flex items-center",children:s.name}),l.jsx("div",{className:"col-span-5 flex items-center",children:s.class_room?l.jsx(sl,{variant:"outline",children:s.class_room.name}):l.jsx("span",{className:"text-gray-400",children:"Sem turma"})})]},s.id)),e[110]=i,e[111]=t.data,e[112]=q):q=e[112];let z;e[113]!==q?(z=l.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:q}),e[113]=q,e[114]=z):z=e[114];let P;e[115]!==F||e[116]!==z?(P=l.jsxs("div",{className:"rounded-md border",children:[F,z]}),e[115]=F,e[116]=z,e[117]=P):P=e[117];const Ue=!t.links[0]?.url;let U;e[118]!==t.links[0].url?(U=()=>O.get(t.links[0].url),e[118]=t.links[0].url,e[119]=U):U=e[119];let $;e[120]!==Ue||e[121]!==U?($=l.jsx(Z,{variant:"outline",disabled:Ue,onClick:U,children:"Anterior"}),e[120]=Ue,e[121]=U,e[122]=$):$=e[122];const $e=!t.links[t.links.length-1]?.url;let J;e[123]!==t.links?(J=()=>O.get(t.links[t.links.length-1].url),e[123]=t.links,e[124]=J):J=e[124];let K;e[125]!==$e||e[126]!==J?(K=l.jsx(Z,{variant:"outline",disabled:$e,onClick:J,children:"Próximo"}),e[125]=$e,e[126]=J,e[127]=K):K=e[127];let M;e[128]!==$||e[129]!==K?(M=l.jsxs("div",{className:"mt-4 flex justify-between",children:[$,K]}),e[128]=$,e[129]=K,e[130]=M):M=e[130];let Ee;return e[131]!==k||e[132]!==w||e[133]!==R||e[134]!==P||e[135]!==M?(Ee=l.jsxs(cl,{breadcrumbs:ce,children:[oe,l.jsx("div",{className:"py-12",children:l.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:l.jsxs(il,{children:[me,l.jsxs(rl,{className:"space-y-6",children:[k,w,ve,R,Te,P,M]})]})})})]}),e[131]=k,e[132]=w,e[133]=R,e[134]=P,e[135]=M,e[136]=Ee):Ee=e[136],Ee}function dl(a){return a.id}function fl(a){return l.jsx(f,{value:String(a.id),children:a.name},a.id)}function hl(a){return l.jsx(f,{value:String(a.id),children:a.name},a.id)}function ul(a){return l.jsx(f,{value:String(a.id),children:a.name},a.id)}function xl(a){return l.jsx(f,{value:String(a.id),children:a.year},a.id)}export{Ol as default};
